


<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta content="noindex" name="robots" />

<meta property="og:title" content="Changelog" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="https://anyscript.org/changelog.html" />
  
<meta property="og:site_name" content="AMMR Documentation" />
  
<meta property="og:description" content="AMMR Beta: New example models:. Fixed: Fixed a problem that caused the OptimizeBVH_Origin class template to fail to load if the same human segment was used more than one time in the same model (for..." />
  
<meta property="og:image" content="https://anyscript.org/ammr-doc/_static/AMMR_Logo.png" />
  
<meta property="og:image:alt" content="AMMR Documentation" />
  
    <title>Changelog &#8212; AMMR v2.4.1-beta Documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/cloud.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="_static/table_styling.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text|Open+Sans|Droid+Sans+Mono" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>

    
    
     
        <script src="_static/jquery.cookie.js"></script>
    

    
     
        <script src="_static/cloud.base.js"></script>
    

    
     
        <script src="_static/cloud.js"></script>
    

    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contribute to Model Development" href="contribute.html" />
    <link rel="prev" title="About the AMMR" href="about.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="contents.html" title="Table Of Contents"
             accesskey="C">toc</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="contribute.html" title="Contribute to Model Development"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="about.html" title="About the AMMR"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">AMMR v2.4.1-beta Documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="about.html" accesskey="U">About the AMMR</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Changelog</a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="tex2jax_ignore mathjax_ignore section" id="changelog">
<span id="whats-new"></span><h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="section" id="ammr-beta">
<h2>AMMR Beta<a class="headerlink" href="#ammr-beta" title="Permalink to this headline">¶</a></h2>
<p><strong>New example models:</strong></p>
<ul class="simple">
<li></li>
</ul>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li><p>Fixed a problem that caused the OptimizeBVH_Origin class template to fail to load if the same human segment was used
more than one time in the same model (for example, at different time intervals) to optimize the BVH origin. The class template has been fixed
and the <a class="reference internal" href="auto_examples/Mocap/plot_BVH_OptimizeOrigin.html#sphx-glr-auto-examples-mocap-plot-bvh-optimizeorigin-py"><span class="std std-ref">BVH optimize origin example model</span></a> has been
updated to add a demo for optimizing the BVH model origin considering the same human segment at different time intervals.</p></li>
</ul>
<p><strong>Changed:</strong></p>
<ul class="simple">
<li><p>The location of the foot drawing generated by the OptimizeBVH_Origin class template for visualization of the target location and orientation of
“LFOOT” and “RFOOT” has been updated to better match the expected actual foot location.</p></li>
</ul>
<p><strong>Added:</strong>
*</p>
</div>
<div class="section" id="ammr-2-4-1-2022-05-30">
<span id="ammr-2-4-changelog"></span><h2>AMMR 2.4.1 (2022-05-30)<a class="headerlink" href="#ammr-2-4-1-2022-05-30" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://doi.org/10.5281/zenodo.6533249"><img alt="Zenodo link" src="https://zenodo.org/badge/DOI/10.5281/zenodo.6533249.svg" /></a></p>
<p><strong>New example models:</strong></p>
<ul class="simple">
<li><p>Added a model using a new class template to optimize the origin of BVH model. This model shows how to optimize
the origin of the BVH model such that a target segment of the human model (Left/Right Foot/Hand) hits a known
position and orientation in a given time interval while following the recorded motion from the trial.
&lt;<a class="reference internal" href="auto_examples/Mocap/plot_BVH_OptimizeOrigin.html#sphx-glr-auto-examples-mocap-plot-bvh-optimizeorigin-py"><span class="std std-ref">See more</span></a>&gt;</p></li>
</ul>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li><p>Fixed a small syntax error which caused the BVH example <code class="docutils literal notranslate"><span class="pre">S1/S01_Trial02/</span></code> to fail loading.</p></li>
<li><p>Fixed a problem with the “interface” morphing between the TLEM2 pelvis and Trunk Pelvis at the tip of the scarum bone.
This bug was visible when using <code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">BM_LEG_TRUNK_INTERFACE</span> <span class="pre">_MORPH_LEG_TO_TRUNK_</span></code>, (i.e. when using the trunk pelvis morphology with the TLEM2 model), which is not the default.</p></li>
<li><p>Fixed missing calibration for the new latissimus dorsi elements introduced in AMMR 2.4. This fix also ensures that all
latissimus dorsi elements are calibrated in the same arm posture.</p></li>
</ul>
<p><strong>Changed:</strong></p>
<ul>
<li><p>The anyscript implemenatation of the acromio-clavicuala, sterno-clavicular, gleno-humeral, and elbow
joints have been refactored. They now use explicit AnyScript joint classes (e.g. <code class="docutils literal notranslate"><span class="pre">AnySphericalJoint</span></code>)
instead of implementing the joints directly with measures and constraints. This simplifies the
implementation, but also changes the structure of the model tree. However, it has no influence
the kinematics of the model, which remains identical.</p>
<p>The new names of the explicit joint objects in <code class="docutils literal notranslate"><span class="pre">ShoulderArm.Jnt</span></code> are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SternoClavicularJoint</span></code> (-3 DOF)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AcromioClavicularJoint</span></code> (-3 DOF)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GlenoHumeralJoint</span></code> (-3 DOF)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HumeroUlnarJoint</span></code> (-5 DOF)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HumeroRadialJoint</span></code> (-1 DOF)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ProximalRadioUlnarJoint</span></code> (-2 DOF)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DistalRadioUlnarJoint</span></code> (-2 DOF)</p></li>
</ul>
</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">HumeroUlnarJoint</span></code> is the elbow flexion extension, and together <code class="docutils literal notranslate"><span class="pre">HumeroRadialJoint</span></code>, <code class="docutils literal notranslate"><span class="pre">ProximalRadioUlnarJoint</span></code> and <code class="docutils literal notranslate"><span class="pre">DistalRadioUlnarJoint</span></code> adds 5 constraints leaving the forearm rotation degree of freedom.</p>
<p><strong>Added:</strong></p>
<ul class="simple">
<li><p>A few previously renamed nodes in pelvis were added back to improve backwards compatibility when loading old seating models.</p></li>
</ul>
</div>
<div class="section" id="ammr-2-4-2022-04-28">
<h2>AMMR 2.4 (2022-04-28)<a class="headerlink" href="#ammr-2-4-2022-04-28" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://doi.org/10.5281/zenodo.6471999"><img alt="Zenodo link" src="https://zenodo.org/badge/DOI/10.5281/zenodo.6471999.svg" /></a></p>
<p><strong>New example models:</strong></p>
<ul class="simple">
<li><p>Added a new trunk exoskeleton concept model
for simulating assistance at the trunk in a box lifting task. This simple example shows how to apply assistive torque directly
to the human model. &lt;<a class="reference internal" href="auto_examples/Other/plot_ExoConceptTrunk_BoxLift.html#sphx-glr-auto-examples-other-plot-exoconcepttrunk-boxlift-py"><span class="std std-ref">See more</span></a>&gt;</p></li>
<li><p>Added a new exoskeleton concept model
for simulation-driven conceptual design of exoskeletons. The model was developed by Prof. John Rasmussen from
Aalborg University. Please see the <a class="reference external" href="https://www.anybodytech.com/simulation-driven-conceptual-design-of-exoskeletons/">web cast</a>
for more details. &lt;<a class="reference internal" href="auto_examples/Other/plot_ExoConcept_BoxLift.html#sphx-glr-auto-examples-other-plot-exoconcept-boxlift-py"><span class="std std-ref">See more</span></a>&gt;</p></li>
<li><p>Added a new femoral torsion tool to apply femoral torsion to the TLEM2.0 leg model.
This model tool was developed by Dr. Enrico De Pieri from University of Basel
Children’s Hospital (UKBB). Please see the documentation
or the <a class="reference external" href="https://www.anybodytech.com/modeling-subject-specific-femoral-torsion-for-the-analysis-of-lower-limb-joint-loads/">web cast</a>
by Enrico on his work and publication on femoral torsion. &lt;<a class="reference internal" href="auto_examples/Orthopedics_and_rehab/plot_FemoralTorsionTool.html#sphx-glr-auto-examples-orthopedics-and-rehab-plot-femoraltorsiontool-py"><span class="std std-ref">See more</span></a>&gt;</p></li>
<li><p>Added a new knee force model
example. The model shows how to calculate a simple estimate of the medial and lateral knee force. &lt;<a class="reference internal" href="auto_examples/Orthopedics_and_rehab/plot_KneeForcesExample.html#sphx-glr-auto-examples-orthopedics-and-rehab-plot-kneeforcesexample-py"><span class="std std-ref">See more</span></a>&gt;</p></li>
<li><p>A new box lifting motion capture model has been added. The model is based on data from an inertial measurement
unit based suit (<a class="reference external" href="https://www.xsens.com/products/mtw-awinda">Xsens</a>), and illustrates how to connect MoCap models with objects in the environment.
&lt;<a class="reference internal" href="auto_examples/Mocap/plot_BVH_BoxLift.html#sphx-glr-auto-examples-mocap-plot-bvh-boxlift-py"><span class="std std-ref">See more</span></a>&gt;</p></li>
</ul>
<p><strong>New features:</strong></p>
<ul class="simple">
<li><p>Many AnyScript example models now include an option to automatically
create a video from the model. To use this functionality find and run
the new <code class="docutils literal notranslate"><span class="pre">VideoTool.CreateVideo</span></code> operation under the Study folder.
This will automatically run the example model, output still frames,
and combine them into a video afterwards. The script can easily be
adapted and moved to other examples.</p></li>
<li><p>Two new utility macros, which make it easier to create 3D grid arrays, have been added to the model repository.
<code class="docutils literal notranslate"><span class="pre">MESHTRIPLES(xarr,</span> <span class="pre">yarr,</span> <span class="pre">zarr)</span></code> and  <code class="docutils literal notranslate"><span class="pre">MESHGRID(xarr,yarr,zarr)</span></code>. i.e. for
creating arrays of all points in a 3D grid array. More information in the file:
<span class="menuselection">Body ‣ AAUHuman ‣ BodyModels ‣ GenericBodyModel ‣ Helper.ClassTemplates.any</span></p></li>
<li><p>Added a warning when the glenohumeral flexion/abduction in the
mannequin values can cause problems as start guess for the kinematic solver. A small automatic pertubation of the Humerus orientation (<code class="docutils literal notranslate"><span class="pre">Axes0</span></code>) is also added in these cases so the shoulder rhythm will work as expected.</p></li>
<li><p>There is a new option to override more settings in the <code class="docutils literal notranslate"><span class="pre">DefaultMannequinDrivers</span></code> section. Now the driver
type (<code class="docutils literal notranslate"><span class="pre">CType=Hard/Soft</span></code>), can be overridden directly by the users.</p></li>
<li><p>Fixed a lack of robustness with muscle recruitment of the abdominal muscles (<code class="docutils literal notranslate"><span class="pre">buckle</span> <span class="pre">support</span></code>).
Muscle recruitment could previously fail with high lumbar flexion.
A small support “artificial muscle” has beeen added to the buckle
segment, preventing muscle recruitment from failing.</p></li>
</ul>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li><p>Improved the selected output by adding the m. Semimembranosus and m.
Semitendinosus contributions to the knee flexor group for both muscle activity (<code class="docutils literal notranslate"><span class="pre">KneeFlexorMuscleActivity</span></code>)
and muscle force (<code class="docutils literal notranslate"><span class="pre">KneeFlexorMuscleForce</span></code>).</p></li>
<li><p>Updated and improved origin of the hamstring muscles. The muscles biceps
femoris, semitendinosus and semimembranosus have been updated to improve their
moment arms in certain lunge movements. The origin points at pelvis has been
moved down a bit to ensure the muscles wraps correctly in lunge movements,
while maintaining the same moment arm in gait etc.</p></li>
<li><p>Fixed a bug in scaling where the mass of the trunk model pelvis was used in some cases instead of the
pelvis mass from the leg model. This could cause a slightly incorrect mass to be used for the pelvis segment.</p></li>
<li><p>Fixed wrong sign for the WristJoint flexion variable. The values users provided in the mannequin
section was incorrectly interpreted as wrist extension.</p></li>
<li><p>Fixed a problem where custom scaling and <a class="reference internal" href="bm_config/bm_constants.html#scaling-xyz" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_XYZ_</span></code></a> would
prevent the model from loading.</p></li>
<li><p>Fixed some logical issues with the <code class="docutils literal notranslate"><span class="pre">ContactSurfaceDistanceAndVelocityDepLinPush.any</span></code> file.</p>
<ul>
<li><p>Fix length calculation and drawing of the normal force</p></li>
<li><p>Fixed an extrapolation error when changing the internal setting <code class="docutils literal notranslate"><span class="pre">_SMOOTHING_FUNCTION_PROFILE_</span></code> to
<code class="docutils literal notranslate"><span class="pre">FUNC_PROFILE_BSPLINE</span></code>. We now cap the height ratio to only be in the interpolation area.
Values outside this area infer that no contact is present.</p></li>
</ul>
</li>
<li><p>Refactored the way Trunk nodes are mirrored between left and right. This is more consistent
with the remaining body parts and handled in the cadaver data files.</p></li>
<li><p>Fixed a problem in MoCap models where calibration studies were not run automatically in models
that only had 3-element muscles on the upper body.</p></li>
<li><p>The <a class="reference internal" href="auto_examples/Validation/plot_EvaluateMomentArms.html#sphx-glr-auto-examples-validation-plot-evaluatemomentarms-py"><span class="std std-ref">example to evaluate moments arms</span></a>
now works when the shoulder rhythm is enabled.</p></li>
</ul>
<p><strong>Changed:</strong></p>
<ul>
<li><p>Improve the trunk model’s strength for trunk external rotation. This change
improves the implementation of the internal/external obliques and latissimus
dorsi muscles. More branches are added to the internal obliques and the
geometry is updated to better match anatomical text books. Likewise, the
latissimus dorsi muscles is discretized into more branches so it has branches
inserting on every vertebra.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">clavicle</span></code> entry in the <code class="docutils literal notranslate"><span class="pre">Anthropometric.SegmentMasses</span></code> folder have been renamed to <code class="docutils literal notranslate"><span class="pre">shoulder</span></code>.
This makes it consistent with the rest of varaibles in the folder, and correctly reflect that
the mass is assigned to both the scapula and clavicle segment.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">OptimalFiberLength</span></code> and <code class="docutils literal notranslate"><span class="pre">TotalTendonLength</span></code> in the TLEM leg models are no longer ‘DesignVar’ when the
parameters are also calibrated. This prevents the huge amount of warnings when calibrating the leg muscles.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">L5LContactNode</span></code>,<code class="docutils literal notranslate"><span class="pre">L4LContactNode</span></code>,<code class="docutils literal notranslate"><span class="pre">L3LContactNode</span></code>,
<code class="docutils literal notranslate"><span class="pre">L4LContactNode</span></code>,<code class="docutils literal notranslate"><span class="pre">L1LContactNode</span></code> nodes were scaled using the Right node Z-axis. This
is now changed to use the Left node Z-axis.</p></li>
<li><p>The trunk model has been restructured in preparation for a full Thoracic model.
This means that all the vertebra and ribs have been created in the model structure, but only as
<code class="docutils literal notranslate"><span class="pre">AnyFolder&amp;</span></code> references to the single rigid thorax segment.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A number of nodes have been renamed in the process. If you have problems loading old model due to missing nodes, please consult the new model examples to find the new names.</p>
</div>
</li>
<li><p>Updated the neutral scapula position and scapula sliding. The default neutral scapula position
(medial rotation) has been updated to a more realistic position. Additionally, the node at scapula
TS point, on which the scapula slides, has been moved to provide a more realistic clearance between
the scapula and the ellipsoid sliding surface representing thorax.<br />
Thanks to Johanna Menze (&#64;menzejo) from the University of Bern for updating the model.</p></li>
<li><p>Renamed a few variables named <code class="docutils literal notranslate"><span class="pre">r</span></code> which could collide with built-in <code class="docutils literal notranslate"><span class="pre">r</span></code> variable.</p></li>
</ul>
<p><strong>Removed:</strong></p>
<ul class="simple">
<li><p>The previously deprecated BM keyword <code class="docutils literal notranslate"><span class="pre">_LEG_MODEL_Leg_</span></code> has been completely removed.</p></li>
<li><p>The special mannequin driver switches for the old leg model (<code class="docutils literal notranslate"><span class="pre">BM_MANNEQUIN_DRIVER_ANKLE_EVERSION_RIGHT/LEFT</span></code>)
have been deprecated. Instead the switch used for the TLEM1/2 leg models
(<a class="reference internal" href="bm_config/bm_statements.html#bm-mannequin-driver-ankle-subtalar-eversion-right" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_MANNEQUIN_DRIVER_ANKLE_SUBTALAR_EVERSION_RIGHT</span></code></a>) can now be used for all leg models.</p></li>
<li><p>Renamed all deprecated ligament class names. <code class="docutils literal notranslate"><span class="pre">AnyViaPointLigament</span></code>-&gt; <code class="docutils literal notranslate"><span class="pre">AnyLigamentViaPoint</span></code>.</p></li>
</ul>
</div>
<div class="section" id="ammr-2-3-4-2021-07-05">
<h2>AMMR 2.3.4 (2021-07-05)<a class="headerlink" href="#ammr-2-3-4-2021-07-05" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://doi.org/10.5281/zenodo.5060249"><img alt="Zenodo link" src="https://zenodo.org/badge/DOI/10.5281/zenodo.5060249.svg" /></a></p>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li><p>Improved the intial guess for Latissimus dorsi wrapping, so the wrapping solutions becomes more
robust to extreeme starting postions.</p></li>
<li><p>Fix a problem with <code class="docutils literal notranslate"><span class="pre">&lt;ANYBODY_PATH_MODELUTILS&gt;/Reactions</span></code> support files preventing models from loading correctly.
Thanks to prof. Michael Skipper Andersen (Aalborg University) for finding this bug.</p></li>
</ul>
<p><strong>Added:</strong></p>
<ul class="simple">
<li><p>Add small helper class template <code class="docutils literal notranslate"><span class="pre">DriverBasedOnLoadPos</span></code> which makes it easy to add constraints
between two segments based on their load time positions.</p></li>
<li><p>Refactor the way pelvis rotations are measured in the interface folder. This allows the user to
override the default implicit global reference frame and thus output pelvis rotation relative to
a custom frame.</p></li>
<li><p>Add a new ability to evaluate trunk strength into the built-in studies for
<a class="reference internal" href="auto_examples/Validation/plot_EvaluateJointStrength.html#sphx-glr-auto-examples-validation-plot-evaluatejointstrength-py"><span class="std std-ref">joint strength evaluation</span></a>.</p></li>
<li><p>New ligaments connecting the Sacrum and Pelvis segments are added. They are enabled
togehter with the ligaments on the lumbar spine through the <code class="docutils literal notranslate"><span class="pre">BM_TRUNK_LUMBAR_LIGAMENTS</span></code>
define statement.</p></li>
</ul>
<p><strong>Changed:</strong></p>
<ul class="simple">
<li><p>The <a class="reference internal" href="auto_examples/Mocap/plot_ADL_Gait.html#sphx-glr-auto-examples-mocap-plot-adl-gait-py"><span class="std std-ref">“ADL gait (MoCap model)”</span></a> has been updated with
most recent improvements from our internal projects. The marker protocol has
been adjust and a lot of small data problems (marker dropouts etc) has been
fixed.</p></li>
<li><p>The posture of the <a class="reference internal" href="auto_examples/ADLs_and_ergonomics/plot_StandingLift.html#sphx-glr-auto-examples-adls-and-ergonomics-plot-standinglift-py"><span class="std std-ref">standing lift example</span></a>
have been modified to make the example more robust.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Tuber_ischiadicum</span></code> node to <code class="docutils literal notranslate"><span class="pre">Seat_contact</span></code> as it was misaligned to the actual bony
landmark position. New <code class="docutils literal notranslate"><span class="pre">Tuber_ischiadicum</span></code> nodes have been added at the bony landmark.
The renaming also makes it easier to identify what the node is used for across the ammr
models.</p></li>
<li><p>Changed the way the arm joint moment measures are calculated. This affect the output when no muscles are added to the model, and the<br />
moments are now calculated and expressed in same way as when muscles are included. The moments are
expressed in a fixed proximal reference frame instead of using the euler axis of rotation which may not be othogonal.
All moment contribution also now found using search function which will be more robust.</p></li>
</ul>
</div>
<div class="section" id="ammr-2-3-3-2021-03-24">
<h2>AMMR 2.3.3 (2021-03-24)<a class="headerlink" href="#ammr-2-3-3-2021-03-24" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://doi.org/10.5281/zenodo.4616316"><img alt="Zenodo link" src="https://zenodo.org/badge/DOI/10.5281/zenodo.4616316.svg" /></a></p>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li><p>Fix a problem single leg models in AnyMocap. The file <code class="docutils literal notranslate"><span class="pre">OptimizeAnthropometricsOnOff.any</span></code>
preventing models with only one leg included from being loaded.</p></li>
<li><p>Removed two unused measures with references to thorax in the scapula and clavicula segments.
The references could cause problems for ´AnyKinCOM` which uses search when including segments.
Thanks to Handa Kensuke from Terrabyte helping fix this error.</p></li>
<li><p>Fix bug in initial wrapping guess for Triceps LH muscle wrapping. This bug could cause the
left side Triceps LH muscle to wrap incorrectly at shoulder.</p></li>
<li><p>Fix calibration of of element 4 and 5 of the latissimus dorsi muscle. These two stands of
the muscles where not included correctly in the calibration study when using the three element
muscles model.</p></li>
</ul>
<p><strong>Changed:</strong></p>
<ul class="simple">
<li><p>The settings of the <a class="reference internal" href="auto_examples/Orthopedics_and_rehab/plot_KneeSimulator.html#sphx-glr-auto-examples-orthopedics-and-rehab-plot-kneesimulator-py"><span class="std std-ref">Knee Simulator example</span></a> has been
tweaked to make it run faster.</p></li>
</ul>
</div>
<div class="section" id="ammr-2-3-2-2021-01-21">
<h2>AMMR 2.3.2 (2021-01-21)<a class="headerlink" href="#ammr-2-3-2-2021-01-21" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://doi.org/10.5281/zenodo.4305559"><img alt="Zenodo link" src="https://zenodo.org/badge/DOI/10.5281/zenodo.4305559.svg" /></a></p>
<div class="without-title admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Model results can change!</strong></p>
<p>A bug related to scaling was fixed in AMMR 2.3.2. This affect models using the
<a class="reference internal" href="bm_config/bm_constants.html#scaling-lengthmassfat" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">length-mass-fat</span></code></a> and
<a class="reference internal" href="bm_config/bm_constants.html#scaling-uniform" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">uniform</span></code></a> scaling, when only Body Height is
specified. The results can change as models more accurately match the
requested body height.</p>
</div>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li><p>Fixed tibialis anterior/posterior variables in the <code class="docutils literal notranslate"><span class="pre">SelectedOutput</span></code>
section. The force values were represented as the <code class="docutils literal notranslate"><span class="pre">max()</span></code> of the muscle elements
instead of the <code class="docutils literal notranslate"><span class="pre">sum()</span></code>. Thanks to Dr. Enrico De Pierie from University Children’s
Hospital Basel for fixing this issue.</p></li>
<li><p>Fixed a bug when using <a class="reference internal" href="bm_config/bm_constants.html#scaling-lengthmassfat" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_LENGTHMASSFAT_</span></code></a> and  <a class="reference internal" href="bm_config/bm_constants.html#scaling-uniform" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_UNIFORM_</span></code></a>
and only specifying the body height as input. The segment lengths were set to
slightly smaller values, which caused the total body height to be less than
what was used as input. The bug occurred since a standard body height in some
‘AnyMan’ files was assumed to be 1.8 m instead of the correct 1.75 m. This fix
aligns the results with <a class="reference internal" href="bm_config/bm_constants.html#scaling-xyz" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_XYZ_</span></code></a> (used in the MoCap
models) and <a class="reference internal" href="bm_config/bm_constants.html#scaling-standard" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_STANDARD_</span></code></a> (50 percentile) which were both
correct.</p></li>
<li><p>Fixed a problem with foot support in the
<a class="reference internal" href="auto_examples/Validation/plot_WilkeSpinePressure.html#sphx-glr-auto-examples-validation-plot-wilkespinepressure-py"><span class="std std-ref">“Spine Pressure validation model”</span></a> lying flat on
the back. The foot is now supported in the right direction.</p></li>
<li><p>Fixed a problem with the Standing Model template which was using an alternate
mode where foot constraints were disabled.</p></li>
<li><p>Fixed a problem with the ADL gait MoCap example, where the batch processing
script would report some trials as failed even if they succeeded correctly.</p></li>
<li><p>Use correct times in the Xsens example MoCap (trial “S01-Trial2”). The model
stopped walking after a number of time steps
because <code class="docutils literal notranslate"><span class="pre">tEnd</span></code> was set after the last data point in the BVH data file.</p></li>
<li><p>Fixed/improved the wrapping surface for the subscapularis muscles. The muscles
can no longer slide off
its wrapping surface in extreme range of motions.</p></li>
<li><p>Fixed infraspinatus muscle wrapping for high arm positions. This fix adds a
torus for infraspinatus wrapping on the humerus.
It fixes a problem where infraspinatus could slide of its wrapping surface in
high arm postures.</p></li>
<li><p>Fix problem with latissimus dorsi muscle wrapping in over-head arm postures. A
new wrapping ellipsoid has been added at the humeral head.</p></li>
</ul>
<p><strong>Changed:</strong></p>
<ul class="simple">
<li><p>The rectus femoris muscle wrapping surface at the hip has been adjusted to prevent
collision between the rectus femoris origin and the wrapping surface. Further,
the surface is now used for both the straight and reflected head of the rectus
femoris.</p></li>
<li><p>Increase the discretization (StringMesh) on approx 30 muscles to improve wrapping.</p></li>
<li><p>The results for the <a class="reference internal" href="auto_examples/Validation/plot_WilkeSpinePressure.html#sphx-glr-auto-examples-validation-plot-wilkespinepressure-py"><span class="std std-ref">“Wilke Spine Pressure”</span></a>
validation model has been updated due to the fix for the
<a class="reference internal" href="bm_config/bm_constants.html#scaling-uniform" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_UNIFORM_</span></code></a>. The updated model improved the validation
results slightly.</p></li>
<li><p>The new large scale <a class="reference internal" href="auto_examples/Mocap/plot_ADL_Gait.html#sphx-glr-auto-examples-mocap-plot-adl-gait-py"><span class="std std-ref">” MoCap model (ADL gait)”</span></a>
has been updated so the results of running all standing reference trials have
been added to the model. This means that all the dynamic trials will work even
if the user forgets to first run the standing reference trials. It is still
necessary to run the standing reference trials again if any changes are made to the model.</p></li>
<li><p>The wrapping for the “Triceps Long Head” muscle has been updated at the humeral head
to avoid the muscle wrapping incorrectly in over-head arm postures. This fix
also adds a via point at the middle of the humerus to make the wrapping solution
more robust.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">VideoLookAtCamera</span></code> camera class template in the AMMR now saves videos as they look in
the model view. I.e. if things are hidden in the model view they will not show up in the video.
This feature is enabled by a new setting <code class="docutils literal notranslate"><span class="pre">AnyCameraLookAt.RenderUserInterfaceViewState</span></code> in
AnyBody version 7.3.2. The old behavior can be restored by setting <code class="docutils literal notranslate"><span class="pre">Camera.RenderUserInterfaceViewState=Off;</span></code>
in the class template.</p></li>
</ul>
</div>
<div class="section" id="ammr-2-3-1-2020-09-30">
<h2>AMMR 2.3.1 (2020-09-30)<a class="headerlink" href="#ammr-2-3-1-2020-09-30" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://doi.org/10.5281/zenodo.4023956"><img alt="Zenodo link" src="https://zenodo.org/badge/DOI/10.5281/zenodo.4023956.svg" /></a></p>
<p><strong>Added:</strong></p>
<ul>
<li><p>All models now run with the new wrapping solver by default, which makes all models with wrapping
muscles run much faster. Hence the <code class="docutils literal notranslate"><span class="pre">AnyBody73_ExperimentalShortestPathSolver</span></code> setting is
deprecated and no effect. The old wrapping algorithm can be enabled (not recommended) by setting:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="n">System</span><span class="p">.</span><span class="n">Compatibility</span><span class="p">.</span><span class="n">ShortestPathSolverVersion</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// 4 is default (new wrapping)</span>
</pre></div>
</div>
</li>
<li><p>New dedicated wrapping ellipsoid for Triceps at the glenohumeral head. This
addition solves a few problems with overhead arm postures.</p></li>
</ul>
<p><strong>Changed:</strong></p>
<ul class="simple">
<li><p>Improvements to the new <a class="reference internal" href="auto_examples/Mocap/plot_ADL_Gait.html#sphx-glr-auto-examples-mocap-plot-adl-gait-py"><span class="std std-ref">“ADL Gait”</span></a>
example. The model now has muscles enabled and the marker protocol has been adjusted
for a better shoulder posture. Also, the batch processing script now runs all trials without hickups.</p></li>
<li><p>Improve the shoulder rhythm. Scapula position when using the shoulder rhythm
is now determined by the Conoideum ligament driver, like how scapula kinematic is
controlled with no shoulder rhythm. The rhythm is now controlled
based on the <strong>plane of elevation</strong> and <strong>humerus elevation</strong> from the
‘ThoraxHumerus’ measures in the interface folder. This tracks the original
specification of the shoulder rhythm in “De Groot, J. H. <em>The shoulder: a kinematic and dynamic analysis of motion and loading.</em> (1998)”.
One difference is still shoulder protraction/retraction where regression coefficients needed
to be tweaked for the shoulder to work in the full range of motion. De Groot et al (1998) had
only based their shoulder rhythm on arm position in front of the body (e.i. positive elevation planes).</p></li>
<li><p>Removed metabolic power (<code class="docutils literal notranslate"><span class="pre">Pmet</span></code>) contributions from artificial muscles defined
as <code class="docutils literal notranslate"><span class="pre">AnyMuscle</span></code> derived classes. <code class="docutils literal notranslate"><span class="pre">Pmet</span></code> contributions from tools, such as GRF
prediction, modelled as <code class="docutils literal notranslate"><span class="pre">AnyGeneralMuscles</span></code> will no longer be part of
studies’ Pmet calculations.</p></li>
<li><p>Adjusted the wrapping segments for deltoid posterior so it doesn’t affect the muscle in overhead arm posturess.</p></li>
<li><p>Teres minor now uses a torus for wrapping at the humeral head.</p></li>
</ul>
<p><strong>Fixed:</strong></p>
<ul>
<li><p>Fixed incorrect values in “SelectedOutput” for four reaction moments
variables, which were wrong due an implementation change of
<code class="docutils literal notranslate"><span class="pre">AnyRevoluteJoint</span></code>. The following variables in
<code class="docutils literal notranslate"><span class="pre">SelectedOutput.Trunk.JointReactionForce</span></code> were incorrect.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">C2C1FlexionExtensionMoment</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C2C1LateralMoment</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C1C0AxialMoment</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C1C0LateralMoment</span></code></p></li>
</ul>
<p>The values were wrong because they referered to the internal generalized force
output of <code class="docutils literal notranslate"><span class="pre">AnyRevoluteJoint</span></code>.  (i.e. <code class="docutils literal notranslate"><span class="pre">Constraints.Reactions.Fout</span></code>). The
values <code class="docutils literal notranslate"><span class="pre">Fout[3]</span></code> and <code class="docutils literal notranslate"><span class="pre">Fout[4]</span></code> can not be interpreted as real physical
reaction moments because <code class="docutils literal notranslate"><span class="pre">AnyRevoluteJoint</span></code> is implemented using euler angles.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The use of generalized forces (<code class="docutils literal notranslate"><span class="pre">Fout</span></code>) is
discouraged, and will be removed in the AMMR. Instead use the force and moment
variables in <code class="docutils literal notranslate"><span class="pre">AnyRefFrameOutput</span></code> subfolder instead.</p>
</div>
</li>
<li><p>Fixed incorrect volume of Satorius muscle in TLEM1 and TLEM2. Thanks to Dr. Adam D. Sylvester
from Johns Hopkins School of Medicine and Dr. Patricia A. Kramer from the University of
Washington for pointing out the error. The error occurred since the satorius in the original <a class="reference external" href="http://linkinghub.elsevier.com/retrieve/pii/S0268003306001896">TLEM1 paper</a> was muscles
in series with a pseudo insertion/origin on the femur. Both of these muscle
elements were therefore listed with the full PSCA of Satorius. This detail was
missed in the AnyBody TLEM1 and TLEM2 implementation where Satorius was
implemented two parallel elements (TLEM1) and a single element (TLEM2). Hence
the Satorius had twice the correct volume.</p></li>
<li><p>Fixed a problem when C3D files are malformed and doesn’t contain a
<code class="docutils literal notranslate"><span class="pre">FORCE_PLATFORM.ZERO</span></code> variable. The C3D standard specifies that the variable
should exist but since it not used in the models the reference could just be
remvoed.</p></li>
<li><p>Fixed an problem which prevented the ANSUR scaling plugin example from working correctly 7.3.0</p></li>
<li><p>Fixed incorrect output of <code class="docutils literal notranslate"><span class="pre">ThoraxHumerus</span></code> interface measures. The mesure wasn’t used
by other parts of the AMMR until now so the bug had no consequences in previous AMMR versions.</p></li>
<li><p>Fixed mass calculation of the foot and talus segments in the <code class="docutils literal notranslate"><span class="pre">GaitVaughan</span></code> validation model.</p></li>
</ul>
<p><strong>Removed:</strong></p>
<ul class="simple">
<li><p>Removed unused <code class="docutils literal notranslate"><span class="pre">BM_TRUNK_CERVICAL_LIGAMENTS</span></code> switch which had no effect since there were no ligaments defined in the neck model.</p></li>
</ul>
</div>
<div class="section" id="ammr-2-3-2020-07-07">
<h2>AMMR 2.3 (2020-07-07)<a class="headerlink" href="#ammr-2-3-2020-07-07" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://doi.org/10.5281/zenodo.3932764"><img alt="Zenodo link" src="https://zenodo.org/badge/DOI/10.5281/zenodo.3932764.svg" /></a></p>
<p><strong>Added:</strong></p>
<ul>
<li><p>Added a new Full Body <a class="reference internal" href="auto_examples/Mocap/plot_ADL_Gait.html#sphx-glr-auto-examples-mocap-plot-adl-gait-py"><span class="std std-ref">“ADL Gait”</span></a> MoCap
Example based on the “Rehazenter Adult Walking Dataset” by <a class="reference external" href="https://doi.org/10.1038/s41597-019-0124-4">Schreiber and Moissenet (2019)</a>.
The model is configured to run all 50 subjects and 1145 trials in the data set. However, you must
download the actual data separately from
<a class="reference external" href="https://figshare.com/articles/A_multimodal_dataset_of_human_gait_at_different_walking_speeds/7734767">FigShare</a>
where it is hosted under a Creative Commons license.</p></li>
<li><p>New GUI plugin which uses statistical information from the ANSUR database to set anthropometric values in AnyBody. A small example model
is added <code class="docutils literal notranslate"><span class="pre">Examples/StatisticalScalingPlugin</span></code> which shows how to use the plugin.</p></li>
<li><p>Added a new option to optimize “head width” / “head depth” / “neck length” / “Tibia torsion” /
“hand breadth” as part of the <code class="docutils literal notranslate"><span class="pre">OptimizeAnthropometricsOnOff</span></code> class_template in the AnyMoCap framework.</p></li>
<li><p>Added new rotation vector based measures in the interface folder for the arm degrees of freedom.
These measures (<code class="docutils literal notranslate"><span class="pre">Interface.Right.RotVectorMeasures.*</span></code>) for joint angles do not have a clinical
meaning but are useful when exporting and importing joint angles.</p></li>
<li><p>Added a new <a class="reference internal" href="bm_config/bm_statements.html#bm-calibration-type" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">option</span> <span class="pre">for</span> <span class="pre">setting</span> <span class="pre">custom</span> <span class="pre">muscle</span> <span class="pre">calibration</span></code></a>.
I.e. an option which disables calibration so the user can add their own code.</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="cp">#define</span> <span class="x x-Statements">BM_CALIBRATION_TYPE</span> <span class="n">_CALIBRATION_TYPE_CUSTOM_</span>

<span class="cp">#include</span> <span class="s">&quot;&lt;ANYBODY_PATH_BODY&gt;\HumanModel.any&quot;</span>

<span class="c1">// Manually include calibration code.</span>
<span class="n">Main</span><span class="p">.</span><span class="n">HumanModel</span><span class="p">.</span><span class="n">Calibration</span> <span class="o">=</span> <span class="p">{</span>
  <span class="cp">#include</span> <span class="s">&quot;&lt;ANYBODY_PATH_BODY&gt;/LegTLEM/Calibration/CalibrationSequenceRight.any&quot;</span>
  <span class="cp">#include</span> <span class="s">&quot;&lt;ANYBODY_PATH_BODY&gt;/LegTLEM/Calibration/CalibrationSequenceLeft.any&quot;</span>
  <span class="cp">#include</span> <span class="s">&quot;&lt;ANYBODY_PATH_BODY&gt;/Arm/Calibration/CalibrationSequenceRight.any&quot;</span>
  <span class="cp">#include</span> <span class="s">&quot;&lt;ANYBODY_PATH_BODY&gt;/Arm/Calibration/CalibrationSequenceLeft.any&quot;</span>
<span class="p">};</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you need to modify the calibration code, copy it to the application folder and include it from there.</p>
</div>
</li>
</ul>
<p><strong>Changed:</strong></p>
<ul>
<li><p>All application examples use the new and fast experimental wrapping algorithmn
in the AnyBody Modeling System 7.3.0. A notice is shown in the output window to
remind the users that the algorithm is enabled. The experimental wrapping algorithm
can be used in all models by setting:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="n">System</span><span class="p">.</span><span class="n">Compatibility</span><span class="p">.</span><span class="n">AnyBody73_ExperimentalShortestPathSolver</span> <span class="o">=</span> <span class="kp">On</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The release notes for the AnyBoy Modeling System has more information
on the new and faster experimental wrapping algorithm.</p>
</div>
</li>
<li><p>Split the SternoCleidomastoid muscle up into two muscle branches.
This makes the two heads of the muscle able to work independent.</p></li>
<li><p>Add extra muscle-via points on for the Latissimus dorsi on the Thorax segment.
This change fixes wrapping problems where the Latissimus dorsi muscle strands
would slide off the wrapping surface representing the thorax segment.</p></li>
<li><p>Renamed all deprecated muscle class names. <code class="docutils literal notranslate"><span class="pre">AnyViaPointMuscle</span></code>-&gt; <code class="docutils literal notranslate"><span class="pre">AnyMuscleViaPoint</span></code>
and <code class="docutils literal notranslate"><span class="pre">AnyShortestPathMuscle</span></code>-&gt; <code class="docutils literal notranslate"><span class="pre">AnyMuscleShortestPath</span></code></p></li>
<li><p>The AnyMoCap framework now uses a more robust way of saving optimized parameters from the parameter optimization studies, when using AMS 7.3.</p></li>
<li><p>Pectoralis Major has been split from 5 into 10 branches to better represent the real fiber direction of the muscle.
Similarly the origins of the new Pectoralis Major muscles have been moved to align with real anatomy of the muscle.</p></li>
<li><p>Changed the format used by the AnyMoCap models when transferring joint angles from the mrker tracking step to
inverse dynamics simulation.
The joint-angles for the arms and pelvis rotation are now written in terms of rotation vectors instead of Euler angles. This fixes
potential singularity problems. The temporary joint angle files produced by the MoCap models
have been renamed to indicate the data is no longer Euler angles.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This means that the data in these temporary files can not easily be interpreted from a clinical
point of view. Create your own output files with physiological joint angles if you need to export that data.</p>
</div>
</li>
<li><p>The body model configuration plugin have been updated. This fixes a number of
smaller issues and bugs.</p></li>
<li><p>The via points of PeroneusLongus and PeroneusBrevis have been adjusted to
ensure the muscles maintain moment arm in a larger range of motion.</p></li>
<li><p>Rectus abdominis muscle has been split into eight branches to better represent geometry, than what is possible with one branch.
The strength between the new branches has been split evenly. Additionally, the PCSA has been increased from <span class="math notranslate nohighlight">\(2.6 cm^2\)</span> to <span class="math notranslate nohighlight">\(7.9 cm^2\)</span> according
to McGill et al 1988, the <span class="math notranslate nohighlight">\(2.6 cm^2\)</span> originates from a study with elderly subjects, the McGill study used mid age subjects.</p></li>
<li><p>Adjusted the origin of Serratus Anterior 1 so it aligns with the geometry of the rib on which it originates.</p></li>
<li><p>Changed the way the deltoid wrapping surfaces move relative to humerus. This
changes makes it wrapping more robust to deltoid flipping over to the wrong side
of the wrapping surface in extreme postures.</p></li>
<li><p>The BVH virtual marker protocol have been adjusted. If older BVH models is used
with AMMR 2.3 a warning/error is triggered to warn the user that the protocol needs
to be updated.</p></li>
</ul>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li><p>Fixed problems with the following variables in the <code class="docutils literal notranslate"><span class="pre">SelectedOuput</span></code> folder: <code class="docutils literal notranslate"><span class="pre">HipAbductorMuscleForce</span></code>,
<code class="docutils literal notranslate"><span class="pre">HipExtensorMuscleActivity</span></code>, <code class="docutils literal notranslate"><span class="pre">HipExtensorMuscleForce</span></code>, <code class="docutils literal notranslate"><span class="pre">KneeFlexorMuscleActivity</span></code> and <code class="docutils literal notranslate"><span class="pre">KneeFlexorMuscleForce</span></code>.</p></li>
<li><p>Markers on BVH stick-figure model in the AnyMoCap framework now respects the
setting: <code class="docutils literal notranslate"><span class="pre">Main.ModelSetup.BVHFileData.ModelDrawOnOff</span></code>.</p></li>
<li><p>Fixed occasional kinematics problems with FullBody MoCap models during
inverse dynamics simulation. This was fixed by changing the internal representation of the shoulder joint angles
when transferring kinematics from marker tracking to the Inverse Dynamics simulations.</p></li>
<li><p>Fixed a problem with the Body Model configurator plugin showing reporting: “No Human Model” when a configuration file already exists.</p></li>
<li><p>Corrected the location of via points of Flexor_Digitorum_Superficialis_Digit2 to avoid wrapping surface collisions
in certain hand positions.</p></li>
<li><p>Corrected the location of via points of Flexor_Digitorum_Superficialis_Digit3 and 4, Palmaris_Longus, Extensor_Carpi_Radialis_Brevis and
Extensor_Digitorum_Digit2 to avoid wrapping surface collisions in certain hand positions.</p></li>
<li><p>The muscle via point representing the bicipital groove have been adjusted to ensure the Biceps Caput Longum wraps the humeral head correctly in</p></li>
<li><p>Fixed a bug in the FreePosture model, where input for the Left/Right arm drivers was switched in some places.</p></li>
<li><p>Fixed missing visual color indication of force plate forces for type 3 force plates in the MoCap models.</p></li>
<li><p>Fixed a bug with in the built-in studies to
<a class="reference internal" href="auto_examples/Validation/plot_EvaluateJointStrength.html#sphx-glr-auto-examples-validation-plot-evaluatejointstrength-py"><span class="std std-ref">evaluate arm joint strength</span></a>.
The range of motion for the left arm elbow pronation/supination were not correct.</p></li>
<li><p>Fixed a bug preventing the model from loading with with <a class="reference internal" href="bm_config/bm_constants.html#scaling-xyz" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_XYZ_</span></code></a> and both legs excluded.</p></li>
<li><p>Fixed the load-time position of the head segment when neck scaling is changed.</p></li>
<li><p>Fixed a problem with visualization in GRF prediction class which prevented GRF
prediction to be used with moving base frames (i.e. treadmills).
Thanks to Marco Antonio Marra (University of Twente) for fixing this.</p></li>
<li><p>Fixed the marker node orientation for BVH (inertial based) MoCap models in the
CreateMarkerDriver class template. Marker orientations are now handles identical
to normal C3D based markers.```</p></li>
<li><p>Fixed incorrect wrapping of teres minor and teres major at extreme shoulder range of motion. New
wrapping surfaces have been added. One in Humerus and one on
scapula. The meet at the glenohumeral joint to prevent the muscles from sliding
to the wrong side of the humerus.</p></li>
</ul>
<p><strong>Removed:</strong></p>
<ul class="simple">
<li><p>Removed unused support files for muscle contact. <code class="docutils literal notranslate"><span class="pre">Tools/ModelUtilities/ContactMuscles/*</span></code></p></li>
</ul>
</div>
<div class="section" id="ammr-2-2-3-2019-11-13">
<h2>AMMR 2.2.3 (2019-11-13)<a class="headerlink" href="#ammr-2-2-3-2019-11-13" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://doi.org/10.5281/zenodo.3521521"><img alt="Zenodo link" src="https://zenodo.org/badge/DOI/10.5281/zenodo.3521521.svg" /></a></p>
<p><strong>Added:</strong></p>
<ul>
<li><p>Add new option to set the type of wrapping surface used in the deltoid wrapping implementation.
The following will force the use of cylinders (which is faster) instead of ellipsoids.</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="cp">#define</span> <span class="n">BM_ARM_DELTOID_WRAPPING</span> <span class="n">_DELTOID_WRAPPING_CYLINDERS_</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="bm_config/bm_statements.html#bm-arm-deltoid-wrapping" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_ARM_DELTOID_WRAPPING</span></code></a> for possible options.</p>
</li>
</ul>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li><p>Fixed problems with BVH models that have jumping angular data due to multiple
solutions to the Euler angle equations when gimbal locks occur.
The fix requires a new structure of the BVH model,
where virtual marker trajectories are calculated by the <code class="docutils literal notranslate"><span class="pre">AnyInputBVH</span></code> class.
See the updated <a class="reference internal" href="auto_examples/Mocap/plot_BVH.html#sphx-glr-auto-examples-mocap-plot-bvh-py"><span class="std std-ref">BVH_Xsens example</span></a>,
and port your existing BVH models to the new example structure.</p></li>
<li><p>Fixed a problem in <a class="reference internal" href="anymocap/index.html#anymocap"><span class="std std-ref">AnyMoCap models</span></a>, where model view operations in
<code class="docutils literal notranslate"><span class="pre">Main.ModelSetup.Views.SetViewMacros</span></code> would not trigger
a redraw of the model view when executed directly.</p></li>
</ul>
<p><strong>Changed:</strong></p>
<ul class="simple">
<li><p>Increase the time offset when running MoCap inverse dynamics simulations.
The offset was 2 frames which were skipped at the start/end
of inverse dynamics simulations. But the accelerations of 4th order
b-spline are only stable on the fourth frame, and hence the offset
has been increased to three frames instead of two.</p></li>
<li><p>ScalingXYZ scaling law has been extended to respect the following new variables
in the <code class="docutils literal notranslate"><span class="pre">HumanModel.Anthropometrics.SegmentDimensions</span></code> folder: (<code class="docutils literal notranslate"><span class="pre">HeadWidth</span></code>, <code class="docutils literal notranslate"><span class="pre">HeadDepth</span></code>,
<code class="docutils literal notranslate"><span class="pre">TrunkDepth</span></code>, <code class="docutils literal notranslate"><span class="pre">NeckLength</span></code>, <code class="docutils literal notranslate"><span class="pre">FootWidth</span></code>)</p></li>
</ul>
<p><strong>Removed:</strong></p>
<ul class="simple">
<li><p>Remove the joint muscles’ strength dependency on the range of motion. Joint
muscles are the torque actuators embedded in the joints when the model is
loaded without muscles. Previously, joint muscles would reduce their strength
to 10% when the joint was outside the range of motion. The lower strength
outside the range of motion was originally implemented to prevent
inverse-inverse simulations finding non-physiological solutions. However, this
problem is now better solved with kinematic joint limits, and the change in
joint strength could sometimes cause models to fail with a muscle recruitment
failure.</p></li>
<li><p>Remove the warning for modified Body model files. The warning can still be enabled
by setting the switch <code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">ANYBODY_ENABLE_MODIFIED_AMMR_NOTICE</span></code></p></li>
</ul>
<p><strong>Added:</strong></p>
<ul class="simple">
<li><p>Added a warning to MoCap models when the number of frames is below 8. Since
the low number of frames causes problems with both low-pass filters and b-spline
interpolation. <em>Note:</em> C3D files with only a single frame works fine since that
is handled specially and often used for static trials.</p></li>
</ul>
</div>
<div class="section" id="ammr-2-2-2-2019-09-12">
<h2>AMMR 2.2.2 (2019-09-12)<a class="headerlink" href="#ammr-2-2-2-2019-09-12" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://doi.org/10.5281/zenodo.3404750"><img alt="Zenodo link" src="https://zenodo.org/badge/DOI/10.5281/zenodo.3404750.svg" /></a></p>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li><p>Fixed kinematic problems when driving specific wrist-flexion/abduction values.
The definition of wrist flexion in <code class="docutils literal notranslate"><span class="pre">BodyModel.Interface</span></code> now measures the
flexion between the radius and small artificial <code class="docutils literal notranslate"><span class="pre">WristJointSeg</span></code> segment
between the radius and the hand segment. This ensures that there is always
unique solution when driving the wrist flexion and abduction.</p></li>
<li><p>Fixed a bug in the AnyMoCap examples when setting <a class="reference internal" href="bm_config/bm_statements.html#bm-scaling" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_SCALING</span></code></a>
to <a class="reference internal" href="bm_config/bm_constants.html#scaling-lengthmassfat" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_LENGTHMASSFAT_</span></code></a>.</p></li>
<li><p>Fixed a number of smaller bugs with Body Model configuration plugin.</p></li>
<li><p>Fixed a bug in calibration of 3 element leg muscles in the TLEM1 and TLEM2 model. The problem was
that the first calibration study (<code class="docutils literal notranslate"><span class="pre">LegCal1</span></code>)
included muscles which were also calibrated specifically in later calibrations. This could in some
cases (certain scaling) lead to a problem where <code class="docutils literal notranslate"><span class="pre">LegCal1</span></code> would be forces to change the fiber-length
even though later specific calibration of the muscle did not need that. Now, <code class="docutils literal notranslate"><span class="pre">LegCal1</span></code> only calibrates
muscles which are not included in the later calibration studies.</p></li>
</ul>
<p><strong>Changed:</strong></p>
<ul class="simple">
<li><p>Changed the posture of the push-up model example to something which looks more natural,
and reduces the max muscle activity.</p></li>
</ul>
</div>
<div class="section" id="ammr-2-2-1-2019-05-13">
<h2>AMMR 2.2.1 (2019-05-13)<a class="headerlink" href="#ammr-2-2-1-2019-05-13" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://doi.org/10.5281/zenodo.2657673"><img alt="Zenodo link" src="https://zenodo.org/badge/DOI/10.5281/zenodo.2657673.svg" /></a></p>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li><p>Fixed a symmetry issue with Scapula scaling in the <a class="reference internal" href="bm_config/bm_constants.html#scaling-xyz" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_XYZ_</span></code></a> scaling law.</p></li>
<li><p>Fixed a bug in the Knee Simulator example regarding an extra tibiofemoral <code class="docutils literal notranslate"><span class="pre">AnyForceSurfaceContact</span></code>.</p></li>
<li><p>Fixed a bug in how the Conoid driver scales with scapula size.</p></li>
<li><p>Fix bug in reference axes for SacrumPelvis Moment measures in selected output.
Thanks to Divyaksh Chander from <a class="reference external" href="https://www.polito.it">Politecnico di Torino</a> for fixing this.</p></li>
<li><p>Attempt to fix muscle wrapping errors with Latissimus dorsi when the model bends forward. This was done
by increasing the Augmented Lagrangian coefficient  <code class="docutils literal notranslate"><span class="pre">SPLine.AugLagCoef</span></code> value and the using full wrapping solver.</p></li>
<li><p>Fix some muscle wrapping problems with subscapularis muscle by increasing the number of points in the string mesh.</p></li>
<li><p>Fixed minor symmetry issue in the head markers of the Full Body MoCap example.</p></li>
</ul>
<p><strong>Changed:</strong></p>
<ul class="simple">
<li><p>Changed the recruitment criterion to the power of 2 (quadratic) in the two MoCap examples using GRF prediction and weak human-ground residuals.
(<a class="reference internal" href="auto_examples/Mocap/plot_Plug-in-gait_Simple_FullBody_GRFPrediction.html#sphx-glr-auto-examples-mocap-plot-plug-in-gait-simple-fullbody-grfprediction-py"><span class="std std-ref">link 1</span></a>
and <a class="reference internal" href="auto_examples/Mocap/plot_BVH.html#sphx-glr-auto-examples-mocap-plot-bvh-py"><span class="std std-ref">link 2</span></a>). This greatly increases the robustness of recruitment solver
and prevents many muscle recruitment failures.</p></li>
</ul>
<p><strong>Added:</strong></p>
<ul>
<li><p>New options to optimize pelvis-, trunk- and head- widths and depths in the <code class="docutils literal notranslate"><span class="pre">OptimizeAnthropometricsOnOff</span></code> class template.</p></li>
<li><p>Simple library of Python utility functions which can be used from AnyScript. This first version only adds a few
functions from the Python’s <code class="docutils literal notranslate"><span class="pre">os.path</span></code> module. They are used by including the <code class="docutils literal notranslate"><span class="pre">Python.Utils.any</span></code> file:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="s">&quot;&lt;ANYBODY_PATH_MODELUTILS&gt;/Python/Utils.any&quot;</span>

<span class="kt">AnySwitchVar</span> <span class="n">file_exists</span> <span class="o">=</span> <span class="n">PyUtils</span><span class="p">.</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">exist</span><span class="p">(</span><span class="s">&quot;some-file&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="ammr-2-2-2019-04-03">
<h2>AMMR 2.2 (2019-04-03)<a class="headerlink" href="#ammr-2-2-2019-04-03" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://doi.org/10.5281/zenodo.1481635"><img alt="Zenodo link" src="https://zenodo.org/badge/DOI/10.5281/zenodo.1481635.svg" /></a></p>
<p><strong>Added:</strong></p>
<ul>
<li><p>New implementation of the Deltoid muscles that uses wrapping instead of previous rake-segment/via-point approach.
The new wrapping deltoid was developed by Marta Strzelczak from
Ecole de technologie superieure, Montreal, CA. The new implementation is used by default but the old
implementation can be enabled with the <a class="reference internal" href="bm_config/bm_statements.html#bm-arm-deltoid-wrapping" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_ARM_DELTOID_WRAPPING</span></code></a> switch. Please see the
<a class="reference internal" href="body/shoulder_arm_model.html#deltoidwrapping"><span class="std std-ref">Shoulder-Arm Documentation</span></a> for more information.</p></li>
<li><p>Added new example model of a Knee Simulator using a knee implant model and force-dependent kinematics (FDK).
See the <a class="reference internal" href="auto_examples/Orthopedics_and_rehab/plot_KneeSimulator.html#sphx-glr-auto-examples-orthopedics-and-rehab-plot-kneesimulator-py"><span class="std std-ref">Knee Simulator example</span></a>
for more information.</p></li>
<li><p>New model plugin (BodyModel Configurator) which provides a graphical user interface
to configure the Body Model (i.e. setting the <code class="docutils literal notranslate"><span class="pre">BM_*</span></code> parameters). Please see
the <a class="reference external" href="https://anyscript.org/tools/body-model-configurator/">blog post</a>
introducing the BM plugin.</p></li>
<li><p>Added a new <a class="reference internal" href="auto_examples/ADLs_and_ergonomics/plot_PosturePredictionModel.html#sphx-glr-auto-examples-adls-and-ergonomics-plot-posturepredictionmodel-py"><span class="std std-ref">Posture prediction model</span></a>
based on standing posture. The model can predict posture as a consequence of applied loads in hands.
It does this by minimizing joint torques and applying balance drivers which account for external applied loads.</p></li>
<li><p>Added new standing model example which uses soft constraints and GRF
prediction. <a class="reference internal" href="auto_examples/ADLs_and_ergonomics/plot_StandingModel.html#sphx-glr-auto-examples-adls-and-ergonomics-plot-standingmodel-py"><span class="std std-ref">See this link</span></a>.
This new model is good starting point for making
standing/balancing models, and the corresponding standing model in the template
generator has also been updated.</p></li>
<li><p>Added new kinematic rhythm to determine the
Sterno-Clavicular axial rotation, effectively removing
the degree of freedom from the shoulder model.  The rhythm distributes the
axial rotation equally between SC and AC joint. The rhythm is active by default, but can be disabled
with <a class="reference internal" href="bm_config/bm_statements.html#bm-arm-clavicula-rotation-rhythm" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_ARM_CLAVICULA_ROTATION_RHYTHM</span></code></a> switch.</p></li>
<li><p>More documentation on the <a class="reference internal" href="anymocap/index.html#anymocap-settings"><span class="std std-ref">AnyMoCap framework and the settings available</span></a> .</p></li>
<li><p>New measures for shoulder angles based on recommendation from International Society of Biomechanics (ISB). The measures are available in the
<code class="docutils literal notranslate"><span class="pre">BodyModel.Interface</span></code> folder. The new measures are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">AcromioClavicular</span></code> (<a class="reference external" href="https://isbweb.org/images/documents/standards/Wu%20et%20al%20J%20Biomech%2038%20(2005)%20981%E2%80%93992.pdf">Wu et al. 2005</a> section 2.4.3)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Protraction</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MedialRotation</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PosteriorTilt</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ScapulaHumerus</span></code> (<a class="reference external" href="https://isbweb.org/images/documents/standards/Wu%20et%20al%20J%20Biomech%2038%20(2005)%20981%E2%80%93992.pdf">Wu et al. 2005</a> section 2.4.4)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">PlaneOfElevation</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Elevation</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">InternalAxialRotation</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ThoraxScapula</span></code>  (<a class="reference external" href="https://isbweb.org/images/documents/standards/Wu%20et%20al%20J%20Biomech%2038%20(2005)%20981%E2%80%93992.pdf">Wu et al. 2005</a> section 2.4.6)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Protraction</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MedialRotation</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PosteriorTilt</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ThoraxHumerus</span></code> (<a class="reference external" href="https://isbweb.org/images/documents/standards/Wu%20et%20al%20J%20Biomech%2038%20(2005)%20981%E2%80%93992.pdf">Wu et al. 2005</a> section 2.4.7)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">PlaneOfElevation</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Elevation</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">InternalAxialRotation</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>Three new BM switches to control add default drivers for the individual neck degrees of freedom:</p>
<ul class="simple">
<li><p><a class="reference internal" href="bm_config/bm_statements.html#bm-mannequin-driver-skull-thorax-flexion" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_MANNEQUIN_DRIVER_SKULL_THORAX_FLEXION</span></code></a></p></li>
<li><p><a class="reference internal" href="bm_config/bm_statements.html#bm-mannequin-driver-skull-thorax-lateralbending" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_MANNEQUIN_DRIVER_SKULL_THORAX_LATERALBENDING</span></code></a></p></li>
<li><p><a class="reference internal" href="bm_config/bm_statements.html#bm-mannequin-driver-skull-thorax-rotation" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_MANNEQUIN_DRIVER_SKULL_THORAX_ROTATION</span></code></a></p></li>
</ul>
</li>
<li><p>A default center of mass kinematic measure were added</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Main.HumanModel.BodyModel.Interface.CenterOfMass</span></code></p></li>
</ul>
</li>
<li><p>Markers in MoCap models now changes color to gray when they drop out (i.e. have a weight of zero).</p></li>
<li><p>Added new <code class="docutils literal notranslate"><span class="pre">ASIS</span></code>/<code class="docutils literal notranslate"><span class="pre">PSIS</span></code>/<code class="docutils literal notranslate"><span class="pre">PT</span></code> bony-landmark nodes to the <code class="docutils literal notranslate"><span class="pre">PelvisSeg.Right</span></code>/<code class="docutils literal notranslate"><span class="pre">Left</span></code> folders.
This ensures the bony landmarks are easily available as nodes in all models
even if the legs are not included.</p></li>
<li><p>Added a new setting (<code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">MOCAP_FILTER_JOINT_ANGLES</span> <span class="pre">ON/OFF</span></code>) to the AnyMoCap frame work. If enabled a
filter will be applied to the intermediate set of joint angles generated by the Marker Tracking step. This
can be useful to remove high accelerations due to kinematic limit constraints
(e.g. Joint angle limits, surface contacts etc.).</p></li>
<li><p>Added a <code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">MOCAP_PARAMETER_FILE_PREFIX</span></code> switch to override the prefix for parameter identification
files (containing marker position and scaling). This can be useful in special cases where subjects share a
common parameter identification file.</p></li>
<li><p>Added two new default arguments (<code class="docutils literal notranslate"><span class="pre">MANNEQUIN_FOLDER</span></code>, <code class="docutils literal notranslate"><span class="pre">BODYMODEL_FOLDER</span></code>) to  the
class_template <code class="docutils literal notranslate"><span class="pre">Template_MannequinDrivers</span></code>, making it easier to reuse the class
template as a general-purpose driver for all joint angles.</p></li>
<li><p>Added a <code class="docutils literal notranslate"><span class="pre">PreAnalysis</span></code> step to the video recorder template (<code class="docutils literal notranslate"><span class="pre">CameraClassTemplate.any</span></code>).
Operations placed in the <code class="docutils literal notranslate"><span class="pre">PreAnalysis</span></code> step will be executed before the video recorder starts.</p></li>
<li><p>Added a new warning if using low-pass filters in the AnyMoCap model without a zero phase filter
(e.g. warn if  <code class="docutils literal notranslate"><span class="pre">FilterForwardBackwardOnOff</span></code> is set to <code class="docutils literal notranslate"><span class="pre">Off</span></code>)</p></li>
<li><p>Added a new option for choosing a different implementation of the kinematic sliding between scapula and thorax.
The new scapula sliding implementation uses multiple points on the ribs and a norm measures to surfaces on the scapula. This work is
preparation of a new thoracic model where ribs are individual segments. Note that this implementation is still a work-in-progress. The new
thorax-scapula contact can be enabled with the <a class="reference internal" href="bm_config/bm_statements.html#bm-arm-thorax-scapula-contact" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_ARM_THORAX_SCAPULA_CONTACT</span></code></a> switch:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="cp">#define</span> <span class="n">BM_ARM_THORAX_SCAPULA_CONTACT</span> <span class="n">_MULTIPLE_POINT_CONTACT_</span>
</pre></div>
</div>
</li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">DEFAULT_PARAMETER_FOLDER</span></code> class template for creating folders with default values
which can be overridden. See the following example:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="n">DEFAULT_PARAMETER_FOLDER</span> <span class="n">Settings</span><span class="p">(</span>
    <span class="n">NPARAM</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">PARAM_1</span> <span class="o">=</span> <span class="n">TibialRotation</span><span class="p">,</span> <span class="n">PARAM_1_TYPE</span> <span class="o">=</span> <span class="kt">AnyMat33</span><span class="p">,</span>
    <span class="n">PARAM_2</span> <span class="o">=</span> <span class="n">Offset</span><span class="p">,</span> <span class="n">PARAM_2_TYPE</span> <span class="o">=</span> <span class="kt">AnyVar</span>
<span class="p">)</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// Default values are specified in the defaults folder.</span>
    <span class="n">Default</span><span class="p">.</span><span class="n">TibialRotation</span> <span class="o">=</span> <span class="nb">RotMat</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kp">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">,</span><span class="kp">y</span><span class="p">);</span>
    <span class="n">Default</span><span class="p">.</span><span class="n">Offset</span> <span class="o">=</span> <span class="mf">0.005</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Parameters can now be overridden if desired.</span>
<span class="n">Settings</span><span class="p">.</span><span class="n">TibialRotation</span> <span class="o">=</span> <span class="nb">RotMat</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kp">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">,</span><span class="kp">y</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>Changed:</strong></p>
<ul>
<li><p>Re-implemented the origins for the Semitendinosus and Biceps Caput Longum muscles in the
TLEM-2.1 model based on the original digitized insertions and MRI scans. Better
correspondence with the original MRI scans increases the moment-arms through
range of motion.</p></li>
<li><p>New wrapping surfaces for Semitendinosus and Biceps Caput Longum muscles based on original MRI scans.
New surfaces ensure that muscles don’t penetrate the pelvis bone at high hip flexion angles.</p></li>
<li><p>Reimplement insertion of Gluteus Medius/Minimus of the TLEM2.1 model based
on original TLEM2 dataset. This improves range of motion in which Gluteus
Medius and Gluteus Minimus has a moment arm for internal rotation of the hip.</p></li>
<li><p>Kinematic rhythms for the shoulder, lumber-spine and cervical-spine can now be specified as soft contraints.
The setting is controlled by setting the BM control statement <code class="docutils literal notranslate"><span class="pre">BM_XXX</span> <span class="pre">RHYTHM</span></code> to <a class="reference internal" href="bm_config/bm_constants.html#rhythm-soft" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_RHYTHM_SOFT_</span></code></a>.
For example:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="cp">#define</span> <span class="x x-Statements">BM_ARM_SHOULDER_RHYTHM</span> <span class="n">_RHYTHM_SOFT_</span>
</pre></div>
</div>
</li>
<li><p>Re-implemented the origins for the Semitendinosus and Biceps Caput Longum muscles in the
TLEM-2.1 model based on the original digitized insertions and MRI scans. Better
correspondence with the original MRI scans increases the moment-arms through
range of motion.</p></li>
<li><p>New wrapping surfaces for Semitendinosus and Biceps Caput Longum muscles based on original MRI scans.
New surfaces ensure that muscles don’t penetrate the pelvis bone at high hip flexion angles.</p></li>
<li><p>Reimplement insertion of Gluteus Medius/Minimus of the TLEM2.1 model based
on original TLEM2 dataset. This improves range of motion in which Gluteus
Medius and Gluteus Minimus has a moment arm for internal rotation of the hip.</p></li>
<li><p>The <a class="reference internal" href="body/leg_tlem2_model.html"><span class="doc">TLEM2 model</span></a> is now the default leg model unless the model is configured otherwise.</p></li>
<li><p>All AnyMoCap examples where changed to use the <a class="reference internal" href="bm_config/bm_constants.html#scaling-xyz" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_XYZ_</span></code></a> scaling law. This scaling law is
similar to <a class="reference internal" href="bm_config/bm_constants.html#scaling-lengthmassfat" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_LENGTHMASSFAT_</span></code></a>, but allows for optimization of all segment dimensions
(hence the <code class="docutils literal notranslate"><span class="pre">XYZ</span></code> name).</p></li>
<li><p>Scaling law <a class="reference internal" href="bm_config/bm_constants.html#scaling-xyz" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_XYZ_</span></code></a> now has a scaling factors to
control the neck scaling. Before neck scaling were controlled by
the head scale factors.</p></li>
<li><p>All MoCap model examples now use the option (<code class="docutils literal notranslate"><span class="pre">UseC3DWeightResiduals=ON</span></code>) in the marker protocols.
This ensures that the marker weights are reduced to zero when a marker drops out (i.e. when the residual value in
the C3D file becomes negative).</p></li>
<li><p>AnyMoCap examples are updated with extra margin at the start/end of the analysis compared to the data in the
C3D file. This prevents inaccurate kinematics due to low-pass filter transients.</p></li>
<li><p>Add warning to AnyMoCap models when <code class="docutils literal notranslate"><span class="pre">tStart</span></code>/<code class="docutils literal notranslate"><span class="pre">tEnd</span></code> are very close to the start/end times of the
data in the C3D file. This can cause inaccurate kinematics at the very start/end of the simulation due
to low-pass filter transients.</p></li>
<li><p>Increased the resolution tibia bones for the TLEM1 and TLEM2 models.</p></li>
<li><p>All examples now have their body model configuration in a separate file
(usually, <code class="docutils literal notranslate"><span class="pre">BodyModelConfiguration.any</span></code>) to accommodate the new Body Model
Configurator plugin.</p></li>
<li><p>The MoCap models now use joint angles for all degrees of freedom when transferring
motion from MarkerTracking study to the Inverse dynamic study. This means that rhythms can now be
soft constraints when running the Marker tracking study, and markers can override the kinematic
rhythms if needed.</p></li>
<li><p>Refactored all examples to avoid the confusing paradigm with a reference called <code class="docutils literal notranslate"><span class="pre">Model.HumanModel</span></code>
pointing to <code class="docutils literal notranslate"><span class="pre">HumanModel.BodyModel</span></code>.</p></li>
<li><p>Improvements to the accuracy of the wrapping cylinder used by Teres Minor and Teres Major.</p></li>
<li><p>The interface morphing algorithm (which morphs pelvis of the trunk or leg dataset to match)
now includes the ASIS/PSIS/PT bony landmarks as control points. This change ensures that
bony-landmarks of the Trunk and Leg datasets map to the exact same point.</p></li>
<li><p>Models generated from templates now fail with a descriptive error message if they are loaded with
an older unsupported version of the AMMR.</p></li>
</ul>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li><p>Fixed problem with the initial guess for Vastus wrapping which could cause
the Vastus muscle to wrap incorrectly when the knee started in slightly over
stretched posture.</p></li>
<li><p>Fixed location of bicep longus via points to pass through bicipital groove</p></li>
<li><p>Fixed a regression in bike model where the foot crank connection did not rotate around
the correct point (<code class="docutils literal notranslate"><span class="pre">PedalConnectNode</span></code>). The point in the foot coordinate system
was also updated to a more posteriorly location beneath the meta tarsal joints.</p></li>
<li><p>Fixed an issue with over-constraint default mannequin drivers when shoulder
rhythm was enabled. Now the default mannequin drivers will not create
drivers for sterno-clavicular rotation, elevation, protraction when the
shoulder rhythm is enabled.</p></li>
<li><p>Fixed the initial wrapping guess for Teres Minor to prevent incorrect wrapping when
starting model in postures which are close to range of motion.</p></li>
<li><p>Fixed typo in <code class="docutils literal notranslate"><span class="pre">Flexor_Digitorum_Profundus_Digit5</span></code> name.</p></li>
<li><p>Fixed an interpolation issue with BVH based AnyMoCap models when the models
were using all frames in a BVH file.</p></li>
<li><p>Added missing hand length/breadth values needed by Detailed Hand to the <code class="docutils literal notranslate"><span class="pre">CustomScaling.any</span></code> for custom scaling scenarios</p></li>
<li><p>Fixed missing possibility for overriding the reaction forces for the Trunk flexion/extension/rotation
drivers in <code class="docutils literal notranslate"><span class="pre">HumanModel.DefaultMannequinDrivers</span></code>.</p></li>
<li><p>Add missing strength scaling factor to <code class="docutils literal notranslate"><span class="pre">pectoralis_major_thoracic_part_3</span></code> in the simple muscle configuration.</p></li>
<li><p>Fixed issue with the <a class="reference internal" href="auto_examples/ADLs_and_ergonomics/plot_StandingModel.html#sphx-glr-auto-examples-adls-and-ergonomics-plot-standingmodel-py"><span class="std std-ref">Standing Model example</span></a>,
where the elbow flexion velocity was incorrectly set to a non zero value.</p></li>
<li><p>Fixed the problem with over-constraint models when adding the
shoulder rhythm.</p></li>
<li><p>Fixed a bug with the Video class (<code class="docutils literal notranslate"><span class="pre">CameraClassTemplate.any</span></code>) when specifying direct path to ffmpeg.</p></li>
<li><p>Fixed a problem with the FullBody AnyMoCap example where a relative high weight
on the soft clavicula rotation constraints could cause the model to fail
kinematically in with the AnyBody Modeling System 7.2.</p></li>
</ul>
<p><strong>Removed:</strong></p>
<ul>
<li><p>Removed previously deprecated MoCap model which were not based on the AnyMoCap framework.</p></li>
<li><p>Removed all references to the previously deprecated <code class="docutils literal notranslate"><span class="pre">BM_TRUNK_NECK</span></code> switch.</p></li>
<li><p>Removed outdated versions of <code class="docutils literal notranslate"><span class="pre">JointLimits_template.any</span></code> and <code class="docutils literal notranslate"><span class="pre">KinLimitsDriver_template.any</span></code> from the AnyMoCap folder.
Updated version of the files still exists in the <code class="docutils literal notranslate"><span class="pre">Tools\ModelUtilities\KinematicLimits</span></code> folder.</p></li>
<li><p>All uses of the Sterno-Clavicular axial rotation in all examples, since this
DOF is now handled by a kinematic rhythm which distributes the
rotation equally between SC and AC joint.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">BM_MANNEQUIN_DRIVER_INDIVIDUAL_WEIGHTS</span></code> switch was removed, since the individual weights can be set directly using</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="n">Main</span><span class="p">.</span><span class="n">HumanModel</span><span class="p">.</span><span class="n">DefaultMannequinDrivers</span><span class="p">.</span><span class="n">KneeDriverRight</span><span class="p">.</span><span class="n">WeakDriverWeight</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="ammr-2-1-1-2018-06-12">
<h2>AMMR 2.1.1 (2018-06-12)<a class="headerlink" href="#ammr-2-1-1-2018-06-12" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://doi.org/10.5281/zenodo.1287730"><img alt="Zenodo link" src="https://zenodo.org/badge/DOI/10.5281/zenodo.1287730.svg" /></a></p>
<p>The AMMR 2.1.1 version is a minor release of the AMMR with smaller changes and bugfixes.
The AnyBody Managed Model Repository now has a DOI (<a class="reference external" href="https://doi.org/10.5281/zenodo.1250764">10.5281/zenodo.1250764</a>).
This is handled by <a class="reference external" href="https://zenodo.org/">Zenodo.org</a> (The European Open Science platform hosted at CERN).</p>
<p><strong>Added:</strong></p>
<ul class="simple">
<li><p>Added a <code class="docutils literal notranslate"><span class="pre">Leg.Seg.Foot.GroundJoint</span></code> RefNode to the foot segment of the TLEM2 model. This RefNode was
also present in the TLEM1 model and was used by few applications.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">GroundVelocity</span></code> setting added to the <code class="docutils literal notranslate"><span class="pre">ForcePlateAutoDetection</span></code> class_template, which
makes class usable with instrumented treadmills.</p></li>
<li><p>All force plate types now have a user-definable <code class="docutils literal notranslate"><span class="pre">ForcePlate.CalMatrix</span></code> variable. The feature is useful to
easily compensate for errors in the c3d file (i.e. swapped channel and wrong sign)</p></li>
</ul>
<p><strong>Changed:</strong></p>
<ul class="simple">
<li><p>Enhanced the <a class="reference internal" href="auto_examples/Mocap/plot_Plug-in-gait_MultiTrial_StandingRef.html#sphx-glr-auto-examples-mocap-plot-plug-in-gait-multitrial-standingref-py"><span class="std std-ref">multi-trial MoCap example</span></a> for best practice for
MoCap trials with multiple subjects and trials. The example now shows how to deal with multiple
subjects and storing the c3d files in a separate folder.</p></li>
</ul>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li><p>Corrected the default mass of the patella segment in the TLEM2 model from zero to 0.025.</p></li>
<li><p>Add missing unilateral reaction between TS node on Scapula and the Thorax when using the shoulder rhythm.</p></li>
<li><p>Adjusted the initial wrapping vectors for the semitendinosus,
semimembranosus, and biceps caput breve muscles around the knee. This has no
influence on the output of the model, and is only done to reduce the risk of
the muscles wrapping the wrong direction around the wrapping surface.</p></li>
<li><p>AnyMoCap:</p>
<ul>
<li><p>The high memory usage of the AnyMoCap BVH model has been fixed. The high memory usage was due to a reference in the <code class="docutils literal notranslate"><span class="pre">CreateMarkerDriver</span></code> class template
which caused the studies to include the BVH input data multiple times in the output.</p></li>
<li><p>The BVH and multi-trial examples now use zero phase shift filtering of force plate forces.
The zero-phase filter can be important to ensure that forces are synchronized with kinematic data.</p></li>
<li><p>Fix bug in Type 1 Force plate when data is not in meters (i.e. <code class="docutils literal notranslate"><span class="pre">PointScaleFactor</span> <span class="pre">!=</span> <span class="pre">1</span></code>).
The PointScaleFactor was applied twice to the z moment component.</p></li>
<li><p>Fix a problem reading C3D files where force plate meta information
is saved with the wrong dimensionality. Such a issue can, for example, happen if the c3d files
are created manually in MATLAB.</p></li>
<li><p>The option to load parameter optimization results is no longer hidden when the
<code class="docutils literal notranslate"><span class="pre">MOCAP_CREATE_PARAMETER_ID_SHORTCUT</span></code> is set to <code class="docutils literal notranslate"><span class="pre">OFF</span></code>.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="ammr-2-1-0-2018-03-22">
<h2>AMMR 2.1.0 (2018-03-22)<a class="headerlink" href="#ammr-2-1-0-2018-03-22" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://doi.org/10.5281/zenodo.1251276"><img alt="Zenodo link" src="https://zenodo.org/badge/DOI/10.5281/zenodo.1251276.svg" /></a></p>
<p><strong>Added:</strong></p>
<ul class="simple">
<li><p>New <a class="reference internal" href="auto_examples/ADLs_and_ergonomics/plot_Squat.html#sphx-glr-auto-examples-adls-and-ergonomics-plot-squat-py"><span class="std std-ref">squat example</span></a>
model which demonstrates a parameterized squatting motion.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">#class_template</span></code> for adding limit drivers to kinematic measures.
Can be included with <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&quot;&lt;ANYBODY_PATH_MODELUTILS&gt;/KinematicLimits/KinLimit_template.any&quot;</span></code></p></li>
<li><p>Muscle ColorScale can now be set from the <code class="docutils literal notranslate"><span class="pre">Main.DrawSettings.Muscles.ColorScale</span></code>.
If you port an older model to the new AMMR you will need to update your <code class="docutils literal notranslate"><span class="pre">DrawSettings.any</span></code>
file.</p></li>
<li><p>AnyMoCap framework:</p>
<ul>
<li><p>New argument <code class="docutils literal notranslate"><span class="pre">DRAW_SCALE</span></code> in the <code class="docutils literal notranslate"><span class="pre">CreateMarkerDriver</span></code> class_template to control the visual size of markers.</p></li>
<li><p>Added an option to the ForcePlateAutoDetection class template to make the limb1/2 contact detection
mutually exclusive. Setting the option <code class="docutils literal notranslate"><span class="pre">ALLOW_MULTI_LIMB_CONTACT=OFF</span></code> will ensure that both legs cant
be in contact with the plate at the same time. This can prevent accidental contact detection
for the collateral leg in the swing phase.</p></li>
<li><p>New option to specify the contact nodes in ForcePlateAutoDetection class template. This makes the class useful
for connecting force plate to other limbs than the feet.</p></li>
<li><p>Add support for the Shoulder Rhythm in AnyMoCap based models.</p></li>
<li><p>Add support for the <a class="reference internal" href="body/detailed_hand_model.html"><span class="doc">Detailed hand model</span></a> in AnyMoCap based models.</p></li>
</ul>
</li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">BM_FOOT_MODEL</span></code> parameter, as preparation for integrating the Glasgow-Maastricht foot model (GM-Foot) back into the AMMR.
Currently, the parameter can only be used for excluding the feet  (<code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">BM_FOOT_MODEL</span> <span class="pre">_FOOT_MODEL_NONE_</span></code>).
making it easier to work on integrating  the GM foot model.</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Adding the GM-Foot to the TLEM2 model is a work in progress. An early version is
released on GitHub: <a class="reference external" href="https://github.com/AnyBody/gm-foot">https://github.com/AnyBody/gm-foot</a></p>
</div>
<p><strong>Changed:</strong></p>
<ul class="simple">
<li><p>Default mannequin drivers for the Pelvis are changed to drive the Pelvis
anatomical frame instead of the segmental reference frame. This also fixes the
discrepancy between the load time position and the mannequin driver position and
makes the driver consistent with the interface measures
<code class="docutils literal notranslate"><span class="pre">BodyModel.Interface.Trunk.PelvisPosX/Y/Z</span></code>.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This change will affect models using the default mannequin drivers unless
the driver values are updated.</p>
</div>
<ul class="simple">
<li><p>The Wilke spine pressure  validation examples have been updated and now uses
the TLEM2 lower extremity model.</p></li>
<li><p>In <a class="reference internal" href="bm_config/bm_constants.html#scaling-xyz" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_XYZ_</span></code></a> scaling law the definition of
length/depth/width of the scapula is corrected to match the anatomical
definitions.</p></li>
<li><p>Updated the AAU Mandible Model introduced in AMMR 2.0.0. By accident the authors did
not share the exact same version of the model that was used in the publication by
<a class="reference external" href="https://www.anybodytech.com/downloads/publications/#Skipper_Andersen2017-zd">Andersen et al. 2017</a>
This is now corrected and the validation  example produces the same results as
published version.</p></li>
<li><p>TLEM 2 model</p>
<ul>
<li><p>Pectineus implementation has been adjusted based on the original MRI
Scans. Only the most lateral element of the pectineus muscle was changed. This
was done to prevent it from penetrating the femoral head in some situations.</p></li>
<li><p>Tweaked the Gluteus Maximum Superior implementation to reduce the risk of
collisions between muscle insertions and the wrapping surface. The two most
proximal insertion points of the Gluteus Superior are shifted more distally, and
the locations of the wrapping surfaces are tweaked.</p></li>
</ul>
</li>
<li><p>AnyMoCap Framework:</p>
<ul>
<li><p>Models now uses the default kinematic solver for the inverse dynamic analysis.</p></li>
<li><p>Changed the set joint drivers used for transferring the
joint angles from the over-determinate marker tracking to the inverse dynamic analysis.
To improve the stability of the scapula kinematics the Scapula Thorax Elevation angle is
used instead of the sterno clavicula elevation angle.</p></li>
<li><p>Changed the way marker drivers are excluded from the Inverse Dynamic analysis.
The drivers are now excluded using the new <code class="docutils literal notranslate"><span class="pre">AnyMechObjectExcluder</span></code> class instead of
the <code class="docutils literal notranslate"><span class="pre">MechObjectExlcude</span></code> member of the Study. This has no practical effect on model output
but means that the <code class="docutils literal notranslate"><span class="pre">MechObjectExlcude</span></code> can now be assigned by the users.</p></li>
<li><p>Update to the BVH MoCap example. Pre-processing the BVH data is now a separate operation which saves the
virtual marker positions to a file. Thus, this step can be skipped the next
time the model is reloaded.</p></li>
<li><p>Changed the AnyMoCap Multi trial example <code class="docutils literal notranslate"><span class="pre">Plug-in-gait_MultiTrial_StandingRef</span></code> to
make it a better starting point for creating new models. 1. Moved the
Human-Ground residuals from the Trunk to the Pelvis segment. 2. Use the TLEM
2 lower body model in the example. 3. Disable upper bounds for the muscle
recruitment <code class="docutils literal notranslate"><span class="pre">Criterion.UpperBoundOnOff</span> <span class="pre">=</span> <span class="pre">Off;</span></code> to improve the stability of
the simulations.</p></li>
</ul>
</li>
</ul>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li><p>Shoulder-arm model:</p>
<ul>
<li><p>Fixed problems with Pectoralis Major wrapping. Wrapping could fail unpredictively when
muscles wrapped in the intersection between the coracoid wrapping and pectoralis
minor cylinder. The coracoid wrapping cylinder has been removed, and the
others has been made longer. This creates a more robust wrapping for the
Pectoralis Major muscle.</p></li>
<li><p>Better initial position for scapula and clavicula. The initial position is now calculated
from the initial position of the chain from thorax through the clavicula to
scapula. This will not change the model output but should make the arm model
more robust solving the first step.</p></li>
<li><p>Improve the Teres Minor wrapping by adjusting the
wrapping surface, and ensure that the insertion point is not directly on the surface.</p></li>
<li><p>The “Evaluate joint strength” studies now also work when the shoulder rhythm is enabled.</p></li>
<li><p>Fixed problems with via points of the wrist extensor muscles colliding with the wrist
wrapping surface in normal range of motion. The via point of Extensor indicis
<code class="docutils literal notranslate"><span class="pre">Via_Extensor_Indicis_pos</span></code> has been slightly adjusted and the location of
the wrist wrapping cylinder <code class="docutils literal notranslate"><span class="pre">MedialExtensorCyl</span></code> has been improved.</p></li>
</ul>
</li>
<li><p>Detailed hand model:</p>
<ul>
<li><p>Fix a problem causing the hand to scale incorrectly.</p></li>
<li><p>Fix a problem with the default mannequin drivers for the left
thumb, where CMC  and MCP abduction was treated as adduction.</p></li>
<li><p>Fixed compatibility between the detailed hand and scaling law <a class="reference internal" href="bm_config/bm_constants.html#scaling-xyz" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_XYZ_</span></code></a>.</p></li>
</ul>
</li>
<li><p>Lower extremity models:</p>
<ul>
<li><p>Fixed various warnings when running calibration routines with the lower extremity models.</p></li>
<li><p>Fixed muscle insertions for the old leg model (<code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">BM_LEG_MODEL</span> <span class="pre">_LEG_MODEL_LEG_</span></code>).
The misaligned pelvis muscles insertions was a regression due to the updated
Trunk pelvis introduced in AMMR 2.0. The pelvis muscles insertions have been
translated and rotated to fit the new Trunk geometry as best as possible.</p></li>
<li><p>Fix missing left leg calibration operations when right leg was excluded.</p></li>
</ul>
</li>
<li><p>MoCap models:</p>
<ul>
<li><p>Weak residuals for GRF prediction: Ensure the same strength is used in all directions for
the weak recruited actuators.</p></li>
<li><p>Fix bug in <code class="docutils literal notranslate"><span class="pre">CreateMarkerDriver</span></code> class template which prevented the
<code class="docutils literal notranslate"><span class="pre">UseC3DWeightResiduals</span></code> from having any effect.</p></li>
<li><p>Fix the wrong visualization of the contact area in ground reaction force
prediction class template, when the base frame is different from the global
coordinate system.</p></li>
<li><p>Wrong masses in the deprecated “old” MOCAP models. The model was not using the
body mass specified in <code class="docutils literal notranslate"><span class="pre">Main.TrialSpecificData.Anthropometrics.BodyMass</span></code></p></li>
</ul>
</li>
<li><p>Other fixes:</p>
<ul>
<li><p>Wrapping convergence for multiple muscles has been improved. This was done by
tweaking the string-mesh of the muscles to improve the wrapping solvers ability to find
the solution within the given number of iterations.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="ammr-2-0-0-2017-11-29">
<h2>AMMR 2.0.0 (2017-11-29)<a class="headerlink" href="#ammr-2-0-0-2017-11-29" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://doi.org/10.5281/zenodo.1251274"><img alt="Zenodo link" src="https://zenodo.org/badge/DOI/10.5281/zenodo.1251274.svg" /></a></p>
<div class="section" id="major-changes">
<h3>Major changes:<a class="headerlink" href="#major-changes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="new-lower-extremity-model-tlem2-1">
<h4>New lower extremity model (TLEM2.1)<a class="headerlink" href="#new-lower-extremity-model-tlem2-1" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>The <a class="reference external" href="http://dx.doi.org/10.1016/j.jbiomech.2014.12.034">Twente Lower Extremity Model version 2.0 dataset</a>, developed in the
TLEM<em>safe</em> EU project was implemented in the AMMR repository. The model is not
the default model, but can be enabled with the <a class="reference internal" href="bm_config/index.html#bm-config"><span class="std std-ref">BM parameter</span></a> <code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">BM_LEG_MODEL</span> <span class="pre">_LEG_MODEL_TLEM2_</span></code></p></li>
<li><p>The model is versioned TLEM 2.1, to indicate the number of changes and
correction which has been added in the process. The changes and updates to the
TLEM2 dataset was done in the <a class="reference external" href="https://lifelongjoints.eu/">Life Long Joints</a> EU research project (paper submitted for publication).</p></li>
<li><p>The most important changes to the TLEM 2 dataset include the following:</p>
<ul>
<li><p>Updated wrapping for the Gluteus Maximus, Iliacus, Psoas around the hip.</p></li>
<li><p>Reworked muscle topology for Gluteus Medius and Gluteus Minimus</p></li>
<li><p>Updated wrapping for Hamstring muscles, and Gastrocnemius around the knee.</p></li>
<li><p>Redefined revolute knee axis and patella joint axis and patella tendon length based on the bone   geometry.
The original TLEM knee axis was estimated using a functional method, and was only valid
for very small flexion angles.
Thanks to Marco Antonio Marra (Radboudumc) for this for this improvement.</p></li>
<li><p>The  ratio of volume between Gluteus Maximus superior/inferior has been re-estimated
based on the original cadaver MRI scans.</p></li>
<li><p>Update the Sartorius via points.</p></li>
<li><p>Re-implemented the Hip Joint location for the pelvis and the femur by fitting spheres to
the femoral head and the acetabulum. This is in contrast to the original TLEM2.0 implementation
where the hip joint center was found using a functional method.</p></li>
<li><p>Included a more detailed version of the patella bone.</p></li>
<li><p>Various minor bug fixes from the original implementation used in the TLEMSafe project.</p></li>
<li><p>Corrected the femoral attachment points for the popliteus muscle</p></li>
<li><p>Update ankle joint nodes with positions fitted to the bone geometry</p></li>
<li><p>Small correction to wrong insertion points for Adductor Longus and Vastus Medialis.</p></li>
</ul>
</li>
<li><p>See the dedicated <a class="reference internal" href="body/leg_tlem2_model.html"><span class="doc">TLEM2.1 page</span></a> page for more information.</p></li>
</ul>
</div>
<div class="section" id="anymocap">
<h4>AnyMoCap<a class="headerlink" href="#anymocap" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>New framework for running MoCap models. The AnyMoCap framework is an effort to
create a simple and unified framework for doing any kind of MoCap analysis with
the AnyBody Modeling System. See the <a class="reference internal" href="auto_examples/index.html#mocap-examples"><span class="std std-ref">AnyMoCap example gallery</span></a>
for more information.</p></li>
<li><p>Algorithms and file for Ground reaction force prediction are added to: <code class="docutils literal notranslate"><span class="pre">ammr/tools/GRFPrediction/</span></code>.
See the
<a class="reference internal" href="auto_examples/Mocap/plot_Plug-in-gait_Simple_FullBody_GRFPrediction.html#sphx-glr-auto-examples-mocap-plot-plug-in-gait-simple-fullbody-grfprediction-py"><span class="std std-ref">MoCap examples</span></a>
for how they are used.</p></li>
</ul>
</div>
<div class="section" id="tlem-1-updates">
<h4>TLEM 1 updates<a class="headerlink" href="#tlem-1-updates" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>The cumulated smaller bug fixes and updates to the TLEM1 model mean that we now
denote the model 1.2.</p></li>
<li><p>Changed the position of the Heel contact node, to align the heights of the
TLEM1 and TLEM2 models.</p></li>
<li><p>Added missing <code class="docutils literal notranslate"><span class="pre">GeomScale</span></code> function to the patella
segment.</p></li>
<li><p>Update ankle joint nodes with positions fitted to the bone geometry</p></li>
<li><p>PSCA is now calculated based on the scaled fiber length. This aligns
the TLEM 1 model with the new TLEM 2 model. It also means that scaling the model
without changing the muscle volumes will change the strength of the model.</p></li>
<li><p>Update scaling of the Patella tendon to work with non-linear scaling laws.</p></li>
<li><p>Added visualization of the Fibula bone.</p></li>
</ul>
</div>
<div class="section" id="ammr-restructure">
<h4>AMMR restructure<a class="headerlink" href="#ammr-restructure" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Added a top-level <code class="docutils literal notranslate"><span class="pre">Tools</span></code> folder helper files and other models which don’t belong in <code class="docutils literal notranslate"><span class="pre">Body/</span></code> or <code class="docutils literal notranslate"><span class="pre">Application</span></code>.</p></li>
<li><p>Moved <code class="docutils literal notranslate"><span class="pre">Body/AAUHuman/Toolbox</span></code> to <code class="docutils literal notranslate"><span class="pre">Tools/ModelUtilities</span></code></p></li>
<li><p>Renamed the <code class="docutils literal notranslate"><span class="pre">Body/AUHuman</span></code> to <code class="docutils literal notranslate"><span class="pre">Body/Mandible_AU</span></code></p></li>
<li><p>Restructured the anthropometric (“AnyMan”) folder.  The folder <code class="docutils literal notranslate"><span class="pre">HumanModel.AnthroDataSubject</span></code> is renamed to
<code class="docutils literal notranslate"><span class="pre">HumanModel.Anthropometics</span></code>. The structure of the folder has also changed with a <code class="docutils literal notranslate"><span class="pre">SegmentDimensions</span></code> and <code class="docutils literal notranslate"><span class="pre">SegmentMasses</span></code> subfolder.</p></li>
</ul>
</div>
<div class="section" id="configuration-parameters">
<h4>Configuration parameters<a class="headerlink" href="#configuration-parameters" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>The previously used system to configure human body using a BodyPartSetup file was completely
replaced with the new body model (BM) parameters.</p></li>
<li><p>Please see the documentation on: <a class="reference internal" href="bm_config/index.html#bm-config"><span class="std std-ref">BM parameters</span></a>.</p></li>
</ul>
</div>
<div class="section" id="scaling-laws">
<h4>Scaling laws<a class="headerlink" href="#scaling-laws" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>An additional scaling law based on individual segmental scaling factors was added to the
repository. It can be enabled using this <a class="reference internal" href="bm_config/index.html#bm-config"><span class="std std-ref">BM parameter</span></a> <code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">BM_SCALING</span> <span class="pre">_SCALING_XYZ_</span></code>.
See the <a class="reference internal" href="Scaling/intro.html#scaling-intro"><span class="std std-ref">guide on scaling</span></a>.</p></li>
<li><p>Default scaling is now <a class="reference internal" href="bm_config/bm_constants.html#scaling-standard" title="records.config"><code class="xref any ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_STANDARD_</span></code></a> (e.g  <code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">BM_SCALING</span> <span class="pre">_SCALING_STANDARD_</span></code>)
which scales all models to default standard 50% male.</p></li>
<li><p>Introduced <a class="reference internal" href="bm_config/bm_constants.html#scaling-none" title="records.config"><code class="xref any ammr ammr-bm_constant docutils literal notranslate"><span class="pre">_SCALING_NONE_</span></code></a>, which disables scaling. E.g. models gets the original unscaled size.</p></li>
</ul>
</div>
<div class="section" id="new-mandible-model">
<h4>New Mandible model<a class="headerlink" href="#new-mandible-model" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Added new mandible model based on a CT scan of a 40 year old male.
For more information see <a class="reference internal" href="body/aalborg_mandible.html"><span class="doc">the documentation for the model</span></a> or the
<a class="reference internal" href="auto_examples/Validation/plot_AalborgMandible.html#sphx-glr-auto-examples-validation-plot-aalborgmandible-py"><span class="std std-ref">validation example</span></a>.</p></li>
</ul>
</div>
<div class="section" id="spine-model">
<h4>Spine model<a class="headerlink" href="#spine-model" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="bm_config/trunk.html#bm-trunk-config"><span class="std std-ref">BM parameters</span></a> were updated to have control over each section of the spine and relevant components.</p></li>
<li><p>The anatomical reference frame of the thorax segment was modified. This change reflects a change
in the pelvic anatomical reference, and ensures upright posture for the standing postures, to
align C1C0 joint with the hip joint centers.</p></li>
<li><p>Boney surfaces of both pelvis and sacrum were updated and now correspond better to the relevant
muscle attachments. These segments now also share a common scaling function. Hip joint centers
were corrected for the old Leg model.</p></li>
<li><p>Improved wrapping surface for Psoas Major muscles based on the TLEM2.0 MR scans</p></li>
<li><p>Insertion, via, and attachment nodes of relevant muscles have been updated to match new geometries
of pelvis and sacrum.</p></li>
</ul>
</div>
<div class="section" id="arm-model">
<h4>Arm model<a class="headerlink" href="#arm-model" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>The model now facilitates individual personalization for each side using nonlinear morphing schemes
in a more consistent manner. Previously the morphing needed to be done on the right side and then
reflect to have the left side morphing. This change removes an extra mirroring step.</p></li>
<li><p>Arm calibration was updated</p></li>
<li><p><a class="reference internal" href="bm_config/arm.html#bm-arm-config"><span class="std std-ref">BM parameters</span></a> have been updated for more convenient use. <code class="docutils literal notranslate"><span class="pre">BM_ARM_DETAILED_HAND</span></code> and
<code class="docutils literal notranslate"><span class="pre">BM_ARM_SHOULDER_RHYTHM</span></code> are now used instead of individual switches for right and left side, which were deprecated.</p></li>
<li><p>Muscle wrapping surfaces were updated for more physiological behavior.</p></li>
<li><p>Scapula reaction contact forces were simplified, and do not longer utilize slider segments.</p></li>
<li><p>Conoid ligament length now scales along with the scapula width.</p></li>
<li><p>Add a <code class="docutils literal notranslate"><span class="pre">GeomScale</span></code> function the Clavicula segment.</p></li>
</ul>
</div>
<div class="section" id="muscle-models">
<h4>Muscle models<a class="headerlink" href="#muscle-models" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>All muscle models are updated to support the structure of the new
<code class="docutils literal notranslate"><span class="pre">AnyMuscleModel3E</span></code> and <code class="docutils literal notranslate"><span class="pre">AnyMuscleModel</span></code> in the AnyBody Modeling System 7.1.
The following variables are renamed:</p>
<blockquote>
<div><ul class="simple">
<li><p>The “optimal fiber length” variable renamed from <code class="docutils literal notranslate"><span class="pre">Lfbar</span></code> to <code class="docutils literal notranslate"><span class="pre">Lf0</span></code></p></li>
<li><p>The “Pennation angle” variable renamed from <code class="docutils literal notranslate"><span class="pre">Gammabar</span></code> to <code class="docutils literal notranslate"><span class="pre">Gamma0</span></code></p></li>
<li><p>The “Tendon strain at F0” variable renamed from <code class="docutils literal notranslate"><span class="pre">Epsilonbar</span></code> to <code class="docutils literal notranslate"><span class="pre">Epsilon0</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Restructured the muscle model section of both TLEM1 and TLEM2 models.</p>
<ul>
<li><p>All the original TLEM based muscle parameter are now located under: <code class="docutils literal notranslate"><span class="pre">Leg/ModelParameters/Muscles</span></code></p></li>
<li><p>All scaled muscle parameters are located in <code class="docutils literal notranslate"><span class="pre">Leg/MusPar/SubjectMusPar</span></code>. This folder references
the TLEM muscle and applies strength scaling etc. The <code class="docutils literal notranslate"><span class="pre">SubjectMusPar</span></code> folder and all subfolders are
implemented with <code class="docutils literal notranslate"><span class="pre">class_template</span></code>. Thus, all muscle parameter can now be overridden in applications
by just assigning the variables a new value: E.g.</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="n">Main</span><span class="p">.</span><span class="n">HumanModel</span><span class="p">.</span><span class="n">BodyModel</span><span class="p">.</span><span class="n">Right</span><span class="p">.</span><span class="n">Leg</span><span class="p">.</span><span class="n">MusPar</span><span class="p">.</span><span class="n">SubjectMusPar</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">GastrocnemiusMedialis</span><span class="p">.</span><span class="n">MuscleVolume</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span> <span class="c1">// Volume in mililiters</span>
  <span class="n">GastrocnemiusMedialis</span><span class="p">.</span><span class="n">Pennationangle</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span> <span class="c1">// (in degrees)</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="calibration">
<h4>Calibration<a class="headerlink" href="#calibration" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Updated calibration for Arms and TLEM legs in the Body Model to</p>
<blockquote>
<div><ul class="simple">
<li><p>include muscles to the calibration study with search functions.</p></li>
<li><p>drive the postures using the measures from the interface folder to remain anatomically
similar throughout future versions.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Added new <strong>experimental</strong> two-parameter calibration, which is based on range-of-motion postures.
The calibration type is controlled by the <a class="reference internal" href="bm_config/bm_statements.html#bm-calibration-type" title="records.config"><code class="xref any ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_CALIBRATION_TYPE</span></code></a> parameter.</p>
<p>For example:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="cp">#define</span> <span class="x x-Statements">BM_CALIBRATION_TYPE</span> <span class="x x-Options">_CALIBRATION_TYPE_2PAR_</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="minor-changes">
<h3>Minor Changes:<a class="headerlink" href="#minor-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added new initial guess for wrapping muscles, which make the wrapping
more when the model starts in extreme postures.</p></li>
<li><p>Update many examples to use the TLEM 2.1 model. See the <a class="reference internal" href="auto_examples/index.html#examples-index"><span class="std std-ref">example gallery</span></a>.</p></li>
<li><p>BM mannequin drivers are now implemented with a class_template allowing all weights and other settings to be customized.</p></li>
<li><p>A default <code class="docutils literal notranslate"><span class="pre">HumanModel.Mannequin</span></code> folder is now automatically created with a <code class="docutils literal notranslate"><span class="pre">class_template</span></code> when no user-defined Mannequin file is set.</p></li>
<li><p>A default <code class="docutils literal notranslate"><span class="pre">Main.DrawSettings</span></code> folder is now automatically created with a
<code class="docutils literal notranslate"><span class="pre">class_template</span></code> when no user-defined <a class="reference internal" href="bm_config/bm_statements.html#bm-drawsettings-file" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">DrawSettings</span></code></a> file is set.</p></li>
<li><p>Extra Mannequin drivers for the individual shoulder degrees of freedom:
<a class="reference internal" href="bm_config/bm_statements.html#bm-mannequin-driver-sternoclavicular-protraction-right" title="records.config"><code class="xref any ammr ammr-bm_statement docutils literal notranslate"><span class="pre">Sterno</span> <span class="pre">clavicula</span> <span class="pre">protraction</span></code></a>,
<a class="reference internal" href="bm_config/bm_statements.html#bm-mannequin-driver-sternoclavicular-elevation-right" title="records.config"><code class="xref any ammr ammr-bm_statement docutils literal notranslate"><span class="pre">Sterno</span> <span class="pre">clavicula</span> <span class="pre">elevation</span></code></a>,
<a class="reference internal" href="bm_config/bm_statements.html#bm-mannequin-driver-sternoclavicular-axial-rotation-right" title="records.config"><code class="xref any ammr ammr-bm_statement docutils literal notranslate"><span class="pre">Sterno</span> <span class="pre">clavicula</span> <span class="pre">axial</span> <span class="pre">rotation</span></code></a></p></li>
<li><p>The initial positions of the pelvis now use the anatomical reference frame.
This follows the logic from the initial rotation of the pelvis which also uses
the anatomical frame.</p></li>
<li><p>DeltoidMuscleConnector segment loading time positioning now depends on the Humerus segment.</p></li>
<li><p>Added <a class="reference external" href="https://anyscript.org/tips-n-tricks/creating-videos-from-your-simulations/">class template to easily create videos from AnyScript model</a>.
The tool requires that <a class="reference external" href="https://www.ffmpeg.org/">FFmpeg</a> is installed.
The class template can be found in: <code class="docutils literal notranslate"><span class="pre">&lt;ANYBODY_PATH_MODELUTILS&gt;/Video/CameraClassTemplate.any</span></code>.
See <a class="reference external" href="https://anyscript.org/tips-n-tricks/creating-videos-from-your-simulations/">this blog post</a>.</p></li>
<li><p>In TLEM models make the opacity of the patellar tendon dependent on the opacity of the patellar surface.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">AnyDoc</span></code> classes are added to the different body model, so the GUI
can create direct links to the documentation.</p></li>
<li><p>Simplify the Scapular reactions to the thorax segment.</p></li>
<li><p>Foot contact nodes are aligned with the AnatomicalFrame</p></li>
<li><p>Updated the Wilke Validation example to reflect the forces for the AMMR 2.0 repository.</p></li>
<li><p>Updates to BM parameters:</p>
<ul>
<li><p>New <a class="reference internal" href="bm_config/bm_statements.html#bm-arm-detailed-hand" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_ARM_DETAILED_HAND</span></code></a> parameter for the detailed hand.
The old <code class="docutils literal notranslate"><span class="pre">BM_ARM_DETAIL_HAND_RIGHT</span></code>/<code class="docutils literal notranslate"><span class="pre">LEFT</span></code> are deprecated.</p></li>
<li><p>New <a class="reference internal" href="bm_config/bm_statements.html#bm-arm-shoulder-rhythm" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_ARM_SHOULDER_RHYTHM</span></code></a> parameter for controlling the shoulder rhythm.
The old <code class="docutils literal notranslate"><span class="pre">BM_ARM_SHOULDER_RHYTHM_RIGHT</span></code>/<code class="docutils literal notranslate"><span class="pre">LEFT</span></code> are deprecated.</p></li>
<li><p>Added new <code class="docutils literal notranslate"><span class="pre">BM_JOINT_TYPE_&lt;joint&gt;_&lt;side&gt;</span></code> parameter for completely
disabling joint and associated nodes in the lower extremity models. (See:
for example <a class="reference internal" href="bm_config/bm_statements.html#bm-joint-type-hip-right" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_JOINT_TYPE_HIP_RIGHT</span></code></a>)</p></li>
<li><p>New <a class="reference internal" href="bm_config/bm_statements.html#bm-leg-model" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_LEG_MODEL</span></code></a> parameter for setting the type of leg model
used. The <a class="reference internal" href="bm_config/bm_statements.html#bm-leg-right" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">BM_LEG_RIGHT</span></code></a>/<a class="reference internal" href="bm_config/bm_statements.html#bm-leg-left" title="records.config"><code class="xref ammr ammr-bm_statement docutils literal notranslate"><span class="pre">LEFT</span></code></a> are
now only <a class="reference internal" href="bm_config/bm_constants.html#on" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">ON</span></code></a>/<a class="reference internal" href="bm_config/bm_constants.html#off" title="records.config"><code class="xref ammr ammr-bm_constant docutils literal notranslate"><span class="pre">OFF</span></code></a> options.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="fixed">
<h3>Fixed:<a class="headerlink" href="#fixed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Sign for the plantar flexion variable were reversed in some section of the
model. This has been fixed.</p></li>
<li><p>Bug in Mannequin drivers for the neck, where velocities were not set correctly.
(Thanks to Assoc. Prof. Michael Skipper Andersen for reporting this)</p></li>
<li><p>Fix small bug preventing <code class="docutils literal notranslate"><span class="pre">StandingModelScalingDisplay</span></code> from loading when using
the <a class="reference internal" href="body/leg_model.html#old-leg-model"><span class="std std-ref">Leg</span></a> model.</p></li>
<li><p>Fixed the opacity of the patellar surface in TLEM models, which pointing
erroneously to the opacity of the talus.</p></li>
<li><p>Fixed wrong symmetry of nodes on the C7 segment of full neck model.</p></li>
<li><p>Latissimus Dorsi 5 fascicle was missing in <code class="docutils literal notranslate"><span class="pre">MuscleNames.any</span></code>  and thus from
many symmetry measures.</p></li>
<li><p>Fixed a symmetry problem for the Deltoid muscles at the shoulder.</p></li>
<li><p>Fixed a symmetry problem for the Disc stiffness from L1 to L5</p></li>
<li><p>Fix white surfaces in examples with flat STL surfaces. For example
<a class="reference internal" href="auto_examples/Sports/plot_CrossTrainer.html#sphx-glr-auto-examples-sports-plot-crosstrainer-py"><span class="std std-ref">Cross Trainer</span></a>.</p></li>
<li><p>Fixed an issue preventing
<a class="reference internal" href="auto_examples/ADLs_and_ergonomics/plot_StandingModel.html#sphx-glr-auto-examples-adls-and-ergonomics-plot-standingmodel-py"><span class="std std-ref">Standing Model</span></a>
from working with one leg.</p></li>
<li><p>Fixed a problem with the drawings of the bones in the Arm model which were not
always symmetrical.</p></li>
<li><p>Fixed symmetry issues in scaling laws for scapula and clavicula,
and humerus.</p></li>
<li><p>Fixed a bug where a the Pectoralis wrapping cylinder was not a included in the calibration study.</p></li>
<li><p>Fixed wrong sign for the AnklePlantarFlexion variable.</p></li>
<li><p>Added missing GeomScale and AnatomicalFrame for Ulna segment.</p></li>
<li><p>Fixed ScalingCustom.any to use Thorax folder instead of Trunk.</p></li>
</ul>
</div>
<div class="section" id="removed">
<h3>Removed:<a class="headerlink" href="#removed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Old MoCap examples have been moved to <code class="docutils literal notranslate"><span class="pre">Application/Examples/Deprecated</span></code></p></li>
<li><p>Removed the deprecated AMMR1.4 hip rotation sequences.</p></li>
<li><p>The GM-foot model. A new version of this in the pipeline. Contact us if you are
interested in this work.</p></li>
<li><p>All older BodyModels which were deprecated in AMMR1.3</p></li>
</ul>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="index.html" title="index">
          <img class="logo" src="_static/AMMR_Logo.png" alt="Logo"/>
        </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
<div class="sphinx-toc sphinxglobaltoc">
<h3><a href="contents.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Welcome to the AMMR documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started with AMMR</a></li>
<li class="toctree-l1"><a class="reference internal" href="bm_config/index.html">Configuring the Body Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="body/models.html">The Body Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html">Application Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_model_from_scratch.html">Creating a Human model from scratch</a></li>
<li class="toctree-l1"><a class="reference internal" href="Scaling/intro.html">Introduction to Scaling</a></li>
<li class="toctree-l1"><a class="reference internal" href="anymocap/index.html">The AnyMoCap Framework</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="about.html">About the AMMR</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="contribute.html">Contribute to Model Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="legal.html">Legal, Trademarks and Copyrights</a></li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="contents.html" title="Table Of Contents"
             >toc</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="contribute.html" title="Contribute to Model Development"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="about.html" title="About the AMMR"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">AMMR v2.4.1-beta Documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="about.html" >About the AMMR</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Changelog</a></li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, AnyBody Technology.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.4.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>